# Fira - Manual Tests

| Step# | Action                                                                        | Expected Results                                                                                                                                                                                                                                                                                                                                                                                  |
| ----- | ----------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 01    | Login with `user01`                                                           | <ul><li>fira-web executes `POST /judgements/v1/preload`</li><li>fira-be determines that **3** judgements must get preloaded</li><li>Judgements for the following judgement pairs get preloaded:<br/>{docId=0,queryId=1,rotate=false}, {docId=1,queryId=1,rotate=true}, {docId=2,queryId=0,rotate=false}</li><li>`/judgements/v1/preload` returns all preloaded judgements</li></ul>               |
| 02    | Execute a page refresh                                                        | <ul><li>fira-web executes `/preload`</li><li>fira-be does not preload any additional judgements</li><li>`/judgements/v1/preload` returns all preloaded judgements</li></ul>                                                                                                                                                                                                                       |
| 03    | Check text shown by fira-web for the _first_ document ({0,1,false})           | <ul><li>The text is not rotated, i.e. the text starts with "Text0" and ends with "Text11!"</li></ul>                                                                                                                                                                                                                                                                                              |
| 04    | <ol><li>Rating=`PERFECT`</li><li>Annotate ["Text0","Text11!"]</li></ol>       | <ul><li>After the pair is rated, fira-web shows a hint that relevance regions must get selected</li><li>After relevant regions got selected, fira-web executes `PUT /judgements/v1/{id}`</li><li>The HTTP call includes Rating=`PERFECT` and relevancePositions=[0,11]</li><li>The next judgement pair is shown in fira-web</li><li>**No** `/preload` gets executed</li></ul>                     |
| 05    | Check text shown by fira-web for the _second_ document ({1,1,true})           | <ul><li>The text **got** rotated, i.e. the text starts with "Text7" (the text is rotated at idx 6 of the annotation parts) and ends with ","</li></ul>                                                                                                                                                                                                                                            |
| 06    | <ol><li>Annotate ["Text7"]</li><li>Rating=`PARTIAL`</li></ol>                 | <ul><li>No hint that relevance regions must be selected is shown by fira-web after the rating</li><li>fira-web executes `PUT /judgements/v1/{id}`</li><li>The HTTP call includes Rating=`PARTIAL` and relevancePositions=[1]</li><li>The next judgement pair is shown in fira-web</li><li>`/preload` gets executed</li></ul>                                                                      |
| 07    | Check the execution of `/preload`                                             | <ul><li>fira-be determines that **2** judgements must get preloaded</li><li>Judgements for the following judgement pairs get preloaded:<br/>{docId=5,queryId=1,rotate=true}, {docId=6,queryId=0,rotate=false}</li><li>`/judgements/v1/preload` returns all preloaded judgements</li></ul>                                                                                                         |
| 08    | Check records of the database table `judgement`                               | <ul><li>All rating levels (PERFECT, PARTIAL) got saved</li><li>The selected relevant regions of Step#04 got saved as sent by fira-web: [0,11]</li><li>The selected relevant regions of Step#06 got "normalized" by the server: [7]</ul>                                                                                                                                                           |
| 09    | Check text shown by fira-web for the _third_ document: ({2,0,false})          | <ul><li>The text is not rotated, i.e. the text starts with "Text0" and ends with "Text14!"</li></ul>                                                                                                                                                                                                                                                                                              |
| 10    | <ol><li>Rating=`PARTIAL`</li><li>Annotate ["Text0","Text14!"]</li></ol>       | <ul><li>After the pair is rated, fira-web shows a hint that relevance regions must get selected</li><li>After relevant regions got selected, fira-web executes `PUT /judgements/v1/{id}`</li><li>The HTTP call includes Rating=`PARTIAL` and relevancePositions=[0,14]</li><li>The next judgement pair is shown in fira-web</li><li>**No** `/preload` gets executed</li></ul>                     |
| 11    | Check text shown by fira-web for the _fourth_ document: ({5,1,true})          | <ul><li>The text **got** rotated, i.e. the text starts with ";" (the text is rotated at idx 8 of the annotation parts) and ends with "Text7"</li></ul>                                                                                                                                                                                                                                            |
| 12    | <ol><li>Annotate ["Text7", "Text15!", ";"]</li><li>Rating=`PARTIAL`</li></ol> | <ul><li>No hint that relevance regions must be selected is shown by fira-web after the rating</li><li>fira-web executes `PUT /judgements/v1/{id}`</li><li>The HTTP call includes Rating=`PARTIAL` and relevancePositions=[15,7,0]</li><li>The next judgement pair is shown in fira-web</li><li>`/preload` gets executed</li></ul>                                                                 |
| 13    | Check the execution of `/preload`                                             | <ul><li>fira-be determines that **2** judgements must get preloaded</li><li>Judgements for the following judgement pairs get preloaded:<br/>{docId=3,queryId=0,rotate=true}, {docId=1,queryId=0,rotate=false}</li><li>`/judgements/v1/preload` returns all preloaded judgements</li></ul>                                                                                                         |
| 14    | Check text shown by fira-web for the _fifth_ document: ({6,0,false})          | <ul><li>The text is not rotated, i.e. the text starts with "Text0" and ends with "Text14!"</li></ul>                                                                                                                                                                                                                                                                                              |
| 15    | <ol><li>Annotate ["Text0"]</li><li>Rating=`WRONG`</li></ol>                   | <ul><li>The HTTP call for `PUT /judgements/v1/{id}` includes Rating=`WRONG` and relevancePositions EMPTY (rating `WRONG` does not require any relevance regions and thus, fira-web does not send them)</li><li>**No** `/preload` gets executed</li></ul>                                                                                                                                          |
| 16    | Check text shown by fira-web for the _sixth_ document: ({3,0,true})           | <ul><li>The text **got** rotated, i.e. the text starts with "Text7" (the text is rotated at idx 7 of the annotation parts) and ends with ","</li></ul>                                                                                                                                                                                                                                            |
| 17    | <ol><li>Rating=`PERFECT`</li><li>Annotate ["Text0","Text14!"]</li></ol>       | <ul><li>The HTTP call for `PUT /judgements/v1/{id}` includes Rating=`PERFECT` and relevancePositions=[8,7]</li><li>`/judgements/v1/preload` returns all preloaded judgements</li></ul>                                                                                                                                                                                                            |
| 18    | Check records of the database table `judgement`                               | <ul><li>All rating levels got saved</li><li>The selected relevant regions of Step#04 got saved as sent by fira-web: [0,14]</li><li>The selected relevant regions of Step#12 got "normalized" by the server: [7,15,8]</li><li>The selected relevant regions of Step#17 got "normalized" by the server: [0,14]</li></ul>                                                                            |
| 19    | Login as admin and export all judgements                                      | The following character ranges got exported:<ol><li>`{docId=0,queryId=1,rotate=false}`: 0-4;31-37</li><li>`{docId=1,queryId=1,rotate=true}`: 19-23</li><li>`{docId=2,queryId=0,rotate=false}`: 0-4;39-45</li><li>`{docId=5,queryId=1,rotate=true}`: 19-24;41-47</li><li>`{docId=6,queryId=0,rotate=false}`: \<no ranges selected\></li><li>`{docId=3,queryId=0,rotate=true}`: 0-4;39-45</li></ol> |
