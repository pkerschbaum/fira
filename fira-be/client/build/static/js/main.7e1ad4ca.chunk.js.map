{"version":3,"sources":["ui/annotation-route/feedback-page/AnnotationFeedback.module.css","App.module.css","ui/admin-page/Admin.module.css","ui/elements/Menu.module.css","ui/elements/Line.module.css","ui/annotation-route/info-page/info-page-01.png","ui/annotation-route/info-page/info-page-02.png","ui/elements/forms/FloatingInput.module.css","ui/annotation-route/annotate-page/Annotation.module.css","ui/elements/LoadingIndicator.tsx","ui/elements/Button.tsx","util/types.util.ts","ui/elements/forms/FloatingInput.tsx","ui/elements/forms/Form.tsx","http/http.exception.ts","logger/logger.ts","http/http.client.ts","typings/enums.ts","browser-storage/browser-storage.ts","store/user/user.subscriptions.ts","store/annotation/annotation.slice.ts","store/user/user.slice.ts","stories/judgement.stories.ts","store/util/actions.util.ts","store/annotation/annotation.hooks.ts","store/annotation/annotation.subscriptions.ts","store/middleware/logger.ts","store/reducers.ts","store/store.ts","stories/auth.stories.ts","ui/login-page/Login.tsx","stories/admin.stories.ts","store/user/user.hooks.ts","util/functions.ts","ui/annotation-route/annotate-page/RateButton.tsx","ui/annotation-route/annotate-page/AnnotationPart.tsx","ui/elements/Line.tsx","ui/annotation-route/annotate-page/Annotation.tsx","ui/util/events.hooks.ts","stories/annotator.stories.ts","ui/annotation-route/info-page/AnnotationInfo.tsx","ui/annotation-route/feedback-page/AnnotationFeedback.tsx","ui/annotation-route/finished-page/AnnotationFinished.tsx","ui/annotation-route/AnnotationRouter.tsx","ui/elements/Menu.tsx","ui/admin-page/Admin.tsx","ui/RoleRoute.tsx","ui/MainRouter.tsx","App.tsx","serviceWorker.ts","boot/load-stored-user.ts","boot/boot.ts","index.tsx","ui/annotation-route/annotate-page/RateButton.module.css","ui/annotation-route/annotate-page/AnnotationPart.module.css","ui/elements/forms/Form.module.css","ui/elements/Button.module.css","ui/login-page/Login.module.css","ui/annotation-route/finished-page/AnnotationFinished.module.css","ui/elements/LoadingIndicator.module.css","ui/annotation-route/info-page/AnnotationInfo.module.css"],"names":["module","exports","LoadingIndicator","type","className","styles","ldsEllipsis","typePrimary","typeSecondary","Button","React","forwardRef","ref","children","buttonType","isLoading","props","useState","animate","setAnimate","onClick","e","onTransitionEnd","button","typeTertiary","assertUnreachable","x","Error","FloatingLabelInput","labelInput","FloatingLabelInputContainer","isError","inputContainerError","inputContainer","FloatingLabel","active","labelActive","label","FloatingInputBox","inputRef","inputActive","input","FloatingTextarea","textareaRef","textarea","FloatingSelect","select","FloatingInput","id","value","childType","otherProps","length","setActive","useRef","onFocus","event","onBlur","target","current","focus","htmlFor","onInput","style","height","scrollHeight","TextInput","useField","field","meta","showError","touched","error","name","Textarea","Select","Form","initialValues","validate","onSubmit","elements","formError","values","a","setSubmitting","setErrors","message","test","code","isSubmitting","errors","form","map","el","idx","childElem","elementType","htmlProps","childElements","isLastElem","Fragment","key","inputDivider","errorList","disabled","HttpException","errorText","status","this","createLogger","context","logWithContext","logFn","optionalParams","debug","console","info","dir","group","groupEnd","axiosClient","axios","create","baseURL","window","location","origin","timeout","logger","httpClient","login","loginRequest","username","post","data","response","refresh","refreshRequest","attempt","lastError","importUsers","accessToken","importUsersRequest","headers","authorization","importDocuments","importDocumentsRequest","put","importQueries","importQueriesRequest","importJudgementPairs","importJudgPairsRequest","preloadJudgements","submitJudgement","judgementId","submitJudgementRequest","submitFeedback","submitFeedbackRequest","exportJudgements","get","exportFeedback","updateConfig","updateConfigRequest","getStatistics","ms","Promise","res","setTimeout","JudgementMode","RelevanceLevel","FeedbackScore","UserRole","browserStorage","user","localStorage","setItem","JSON","stringify","removeItem","storedUser","getItem","currentlyStoredUser","parse","JudgementPairStatus","RateLevels","relevanceLevel","NOT_RELEVANT","annotationRequired","MISLEADING_ANSWER","TOPIC_RELEVANT_DOES_NOT_ANSWER","GOOD_ANSWER","PERFECT_ANSWER","authenticate","createAction","acknowledgePage","logout","reducer","createReducer","builder","addCase","state","action","accessTokenJwtPayload","jwt","payload","refreshTokenJwtPayload","refreshToken","isAdmin","resource_access","roles","some","role","acknowledgedInfoPage","acknowledgedFinishedPage","val","expiry","exp","ADMIN","ANNOTATOR","page","actions","INITIAL_STATE","judgementPairs","rateJudgementPair","selectRangeStartEnd","deleteRange","setJudgementStatus","selectJudgementPair","alreadyFinished","remainingToFinish","remainingUntilFirstFeedbackRequired","countOfFeedbacks","countOfNotPreloadedPairs","judgementPairsReceived","judgements","judgement","jp1","jp2","localEquivalentPair","find","pair","queryText","docAnnotationParts","part","index","annotatedRanges","TO_JUDGE","currentJudgementPair","currentJudgementPairId","rateLevel","currentAnnotationStart","undefined","selectedPartIdx","annotationPartIndex","start","actualStart","actualEnd","filter","range","end","push","currentJudgementPairSelectedOnMs","Date","getTime","userActions","judgementStories","store","getState","dispatch","annotationActions","annotationState","annotation","submitCurrentJudgement","relevancePositions","annotatedRange","i","now","durationUsedToJudgeMs","SEND_PENDING","SEND_FAILED","SEND_SUCCESS","useActionsWithDispatch","useDispatch","actionsWithDispatch","hasOwnProperty","annotationComputations","useAnnotationState","pairsSuccessfullySent","useSelector","annotationDataReceivedFromServer","addMemoizedSubscription","subscription","memoizedValue","memoizeOnValue","subscribe","newValueOfStore","listener","loggerMiddleware","next","result","combineReducers","userReducer","annotationReducer","configureStore","rootReducer","middleware","getDefaultMiddleware","scheduleId","REFRESH_OFFSET","moment","duration","currentUser","userOfStore","previousUser","clearTimeout","timeStampToRefresh","unix","subtract","timeUntilRefreshMs","diff","asMilliseconds","authStories","toString","subscribedStore","countOfOpenJudgementPairs","nextPair","forEach","password","loginResponse","refreshResponse","Login","to","container","headline","inputArea","inputHeadline","getStatus","autoCorrect","autoCapitalize","autoComplete","adminStories","saveTsv","config","filename","blob","Blob","elem","document","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","useUserState","userRole","userAcknowledgedInfoPage","userAcknowledgedFinishedPage","noop","RATE_LEVEL_DATA","notRelevant","text","keyboardKey","misleadingAnswer","topicRelevantDoesNotAnswer","goodAnswer","perfectAnswer","RateButton","hotkey","AnnotationPart","isRangeStart","isInSelectedRange","showTooltip","annotationIsAllowedOnPart","annotationIsAllowedInGeneral","isPlaceholder","onPartClick","onTooltipClick","textToShow","replace","currentRangeStartStyle","rangeStart","annotationAllowedOnPartStyle","annotationAllowedOnPart","annotationAllowedInGeneralStyle","annotationAllowedInGeneral","placeholderStyle","placeholder","annotatePartSpan","data-idx","annotatePart","isInRange","Manager","Reference","Popper","placement","data-placement","annotatePartTooltipButton","xmlns","width","viewBox","fill","d","Line","horizontalLine","AnnotationShell","finishedFraction","hideTooltip","queryComponent","documentComponent","guideComponent","progressBar","onClickCapture","actionBar","orientation","annotationArea","footer","Annotation","keyFunctionMap","tooltipAnnotatePartIndex","setTooltipAnnotatePartIndex","createJudgementFn","Digit1","Digit2","Digit3","Digit4","Digit5","useEffect","keyUpHandler","addEventListener","passive","removeEventListener","currentRateLevel","ratingRequired","currentSelectionNotFinished","mode","SCORING_AND_SELECT_SPANS","annotationIsRequired","annotationStatus","userSelectionAllowed","noUserSelectionAllowed","onMouseUp","selection","getSelection","anchorNode","focusNode","anchorIdx","currentNode","dataset","parentNode","focusIdx","empty","Number","annotationPart","partIdx","correspondingAnnotatedRange","isInAnnotatedRange","isLastInAnnotatedRange","canAnnotatePart","guideText","nextButton","annotatorStories","feedbackData","AnnotationInfo","annotationRouting","useRouting","content","infoPage01","alt","infoPage02","entry","infoImage","src","routeToAnnotatePage","FEEDBACK_SCORE_TEXTS","VERY_GOOD","GOOD","DECENT","DONT_LIKE_IT","AnnotationFeedback","feedback","feedbackScore","feedbackText","score","Object","PartyPopperEmoji","AnnotationFinished","finishedLogo","history","useHistory","routeToInfoPage","AnnotationRouter","match","useRouteMatch","redirectToDefault","path","pageToShow","MenuButton","menuButton","Menu","onViewportClick","showMenu","setShowMenu","viewportClickHandler","onLogout","onShowInfoPage","toggleShowMenu","oldVal","createMenuButton","Admin","statistics","updateStatistics","fetchStatisticsAndUpdate","adminArea","actionButtons","judgementMode","rotateDocumentText","options","as","statisticsContainer","statistic","statisticValue","statisticLabel","RoleRoute","requiredRole","rest","RedirectDependingOnUserRole","MainRouter","exact","App","app","Boolean","hostname","bootScripts","bootScript","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.7e1ad4ca.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AnnotationFeedback_container__3lJyj\",\"headline\":\"AnnotationFeedback_headline__1MCu2\",\"errorList\":\"AnnotationFeedback_errorList__32-8k\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__291qZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Admin_container__33Ln9\",\"adminArea\":\"Admin_adminArea__32AQI\",\"actionBar\":\"Admin_actionBar__1sZ-J\",\"actionButtons\":\"Admin_actionButtons__2_iKY\",\"options\":\"Admin_options__3JgHD\",\"button\":\"Admin_button__HYdyi\",\"statisticsContainer\":\"Admin_statisticsContainer__1sIQ8\",\"statisticValue\":\"Admin_statisticValue__2yFP8\",\"statisticLabel\":\"Admin_statisticLabel__1bWck\",\"statistic\":\"Admin_statistic__2fbh8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"menuButton\":\"Menu_menuButton__2DoUk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"horizontalLine\":\"Line_horizontalLine__2MX1a\"};","module.exports = __webpack_public_path__ + \"static/media/info-page-01.362e062c.png\";","module.exports = __webpack_public_path__ + \"static/media/info-page-02.7e7f805f.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"labelInput\":\"FloatingInput_labelInput__10wpa\",\"inputContainer\":\"FloatingInput_inputContainer__QiCsd\",\"inputContainerError\":\"FloatingInput_inputContainerError__3CdgT\",\"label\":\"FloatingInput_label__2jORm\",\"labelActive\":\"FloatingInput_labelActive__1MHdi\",\"input\":\"FloatingInput_input__gLnnR\",\"inputActive\":\"FloatingInput_inputActive__2r5uL\",\"textarea\":\"FloatingInput_textarea__17ztw\",\"select\":\"FloatingInput_select__3m6Yr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"progressBar\":\"Annotation_progressBar__1jTVR\",\"container\":\"Annotation_container__235hn\",\"actionBar\":\"Annotation_actionBar__kQjP7\",\"queryText\":\"Annotation_queryText__ETBSK\",\"annotationArea\":\"Annotation_annotationArea__tNPNj\",\"noUserSelectionAllowed\":\"Annotation_noUserSelectionAllowed__346u6\",\"footer\":\"Annotation_footer__1iEYQ\",\"guideText\":\"Annotation_guideText__2LwRl\",\"nextButton\":\"Annotation_nextButton__Oigsj\",\"loading\":\"Annotation_loading__laYDz\",\"shimmer\":\"Annotation_shimmer__1oIFF\"};","import React from 'react';\r\n\r\nimport styles from './LoadingIndicator.module.css';\r\n\r\nconst LoadingIndicator: React.FC<{ type?: 'primary' | 'secondary' }> = ({ type = 'secondary' }) => (\r\n  <div\r\n    className={`${styles.ldsEllipsis} ${\r\n      type === 'primary' ? styles.typePrimary : styles.typeSecondary\r\n    }`}\r\n  >\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n    <div></div>\r\n  </div>\r\n);\r\n\r\nexport default LoadingIndicator;\r\n","import React, { useState } from 'react';\r\n\r\nimport styles from './Button.module.css';\r\nimport LoadingIndicator from './LoadingIndicator';\r\n\r\nconst Button = React.forwardRef<\r\n  HTMLButtonElement,\r\n  {\r\n    buttonType?: 'primary' | 'secondary' | 'tertiary';\r\n    isLoading?: boolean;\r\n  } & React.DetailedHTMLProps<React.ButtonHTMLAttributes<HTMLButtonElement>, HTMLButtonElement>\r\n>(({ children, buttonType = 'secondary', isLoading, ...props }, ref) => {\r\n  const [animate, setAnimate] = useState(false);\r\n\r\n  function animateStart() {\r\n    setAnimate(true);\r\n  }\r\n\r\n  function animateEnd() {\r\n    setAnimate(false);\r\n  }\r\n\r\n  function onClick(e: React.MouseEvent<HTMLButtonElement>) {\r\n    if (typeof props.onClick === 'function') {\r\n      props.onClick(e);\r\n    }\r\n    animateStart();\r\n  }\r\n\r\n  function onTransitionEnd(e: React.TransitionEvent<HTMLButtonElement>) {\r\n    if (typeof props.onTransitionEnd === 'function') {\r\n      props.onTransitionEnd(e);\r\n    }\r\n    animateEnd();\r\n  }\r\n\r\n  return (\r\n    <button\r\n      {...props}\r\n      onClick={onClick}\r\n      onTransitionEnd={onTransitionEnd}\r\n      ref={ref}\r\n      className={`${props.className} ${styles.button} ${animate && styles.animate} ${\r\n        buttonType === 'primary'\r\n          ? styles.typePrimary\r\n          : buttonType === 'secondary'\r\n          ? styles.typeSecondary\r\n          : styles.typeTertiary\r\n      }`}\r\n    >\r\n      {!isLoading ? (\r\n        typeof children === 'string' ? (\r\n          <span>{children}</span>\r\n        ) : (\r\n          children\r\n        )\r\n      ) : (\r\n        <div>\r\n          <LoadingIndicator type={buttonType === 'tertiary' ? 'secondary' : buttonType} />\r\n        </div>\r\n      )}\r\n    </button>\r\n  );\r\n});\r\n\r\nexport default Button;\r\n","export function assertUnreachable(x: never): never {\r\n  throw new Error('Should not get here');\r\n}\r\n","import React, { useState, useRef } from 'react';\r\n\r\nimport styles from './FloatingInput.module.css';\r\nimport { assertUnreachable } from '../../../util/types.util';\r\n\r\ntype FloatingLabelInputProps = React.DetailedHTMLProps<\r\n  React.HTMLAttributes<HTMLDivElement>,\r\n  HTMLDivElement\r\n>;\r\n\r\nconst FloatingLabelInput: React.FC<FloatingLabelInputProps> = ({ children, ...props }) => (\r\n  <div {...props} className={`${props.className} ${styles.labelInput}`}>\r\n    {children}\r\n  </div>\r\n);\r\n\r\ntype FloatingLabelInputContainerProps = React.DetailedHTMLProps<\r\n  React.HTMLAttributes<HTMLDivElement>,\r\n  HTMLDivElement\r\n>;\r\n\r\nconst FloatingLabelInputContainer: React.FC<\r\n  {\r\n    isError?: boolean;\r\n  } & FloatingLabelInputContainerProps\r\n> = ({ isError, children, ...props }) => (\r\n  <div\r\n    {...props}\r\n    className={`${props.className} ${isError && styles.inputContainerError} ${\r\n      styles.inputContainer\r\n    }`}\r\n  >\r\n    {children}\r\n  </div>\r\n);\r\n\r\ntype FloatingLabelProps = { active: boolean } & React.DetailedHTMLProps<\r\n  React.LabelHTMLAttributes<HTMLLabelElement>,\r\n  HTMLLabelElement\r\n>;\r\n\r\nconst FloatingLabel: React.FC<FloatingLabelProps> = ({ active, children, ...props }) => (\r\n  <label\r\n    {...props}\r\n    className={`${props.className} ${!!active && styles.labelActive} ${styles.label}`}\r\n  >\r\n    {children}\r\n  </label>\r\n);\r\n\r\ntype FloatingInputBoxProps = {\r\n  active: boolean;\r\n  inputRef: React.RefObject<HTMLInputElement>;\r\n} & React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\r\n\r\nconst FloatingInputBox: React.FC<FloatingInputBoxProps> = ({\r\n  children,\r\n  active,\r\n  inputRef,\r\n  ...props\r\n}) => (\r\n  <input\r\n    {...props}\r\n    ref={inputRef}\r\n    className={`${props.className} ${!!active && styles.inputActive} ${styles.input}`}\r\n  >\r\n    {children}\r\n  </input>\r\n);\r\n\r\ntype FloatingTextareaProps = {\r\n  textareaRef: React.RefObject<HTMLTextAreaElement>;\r\n} & React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLTextAreaElement>, HTMLTextAreaElement>;\r\n\r\nconst FloatingTextarea: React.FC<FloatingTextareaProps> = ({ children, textareaRef, ...props }) => (\r\n  <textarea {...props} ref={textareaRef} className={`${props.className} ${styles.textarea}`}>\r\n    {children}\r\n  </textarea>\r\n);\r\n\r\ntype FloatingSelectProps = React.DetailedHTMLProps<\r\n  React.SelectHTMLAttributes<HTMLSelectElement>,\r\n  HTMLSelectElement\r\n>;\r\n\r\nconst FloatingSelect: React.FC<FloatingSelectProps> = ({ children, ...props }) => (\r\n  <select {...props} className={`${props.className} ${styles.select}`}>\r\n    {children}\r\n  </select>\r\n);\r\n\r\nconst FloatingInput: React.FC<\r\n  { [prop: string]: any } & {\r\n    isError?: boolean;\r\n    childType: 'input' | 'textarea' | 'select';\r\n  }\r\n> = ({ id, label, type, className, isError, value, childType, ...otherProps }) => {\r\n  const [active, setActive] = useState(childType !== 'input' || (!!value && value.length > 0));\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  function onFocus(event: any) {\r\n    setActive(true);\r\n    if (otherProps.onFocus) {\r\n      otherProps.onFocus(event);\r\n    }\r\n  }\r\n  function onBlur(event: any) {\r\n    if (!event.target.value || event.target.value.length === 0) {\r\n      setActive(false);\r\n    }\r\n    if (otherProps.onBlur) {\r\n      otherProps.onBlur(event);\r\n    }\r\n  }\r\n\r\n  function onContainerClick() {\r\n    if (childType === 'input') {\r\n      inputRef.current!.focus();\r\n    } else if (childType === 'textarea') {\r\n      textareaRef.current!.focus();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <FloatingLabelInput>\r\n      <FloatingLabelInputContainer\r\n        onClick={onContainerClick}\r\n        isError={isError}\r\n        className={className}\r\n      >\r\n        {label && (\r\n          <FloatingLabel htmlFor={id} active={active}>\r\n            {label}\r\n          </FloatingLabel>\r\n        )}\r\n        {childType === 'input' ? (\r\n          <FloatingInputBox\r\n            {...otherProps}\r\n            active={active}\r\n            id={id}\r\n            onBlur={onBlur}\r\n            onFocus={onFocus}\r\n            inputRef={inputRef}\r\n            type={type}\r\n          />\r\n        ) : childType === 'select' ? (\r\n          <FloatingSelect {...otherProps}>{otherProps.children}</FloatingSelect>\r\n        ) : childType === 'textarea' ? (\r\n          <FloatingTextarea\r\n            {...otherProps}\r\n            id={id}\r\n            onBlur={onBlur}\r\n            onFocus={onFocus}\r\n            textareaRef={textareaRef}\r\n            onInput={function resizeOnContentChange() {\r\n              // see https://stackoverflow.com/a/25621277/1700319\r\n              textareaRef.current!.style.height = 'auto';\r\n              textareaRef.current!.style.height = textareaRef.current!.scrollHeight + 'px';\r\n            }}\r\n          />\r\n        ) : (\r\n          assertUnreachable(childType)\r\n        )}\r\n      </FloatingLabelInputContainer>\r\n    </FloatingLabelInput>\r\n  );\r\n};\r\n\r\nexport default FloatingInput;\r\n","import React from 'react';\r\nimport { Formik, FieldHookConfig, useField, FormikValues, Form as FormikForm } from 'formik';\r\n\r\nimport styles from './Form.module.css';\r\nimport Button from '../Button';\r\nimport FloatingInput from './FloatingInput';\r\nimport { assertUnreachable } from '../../../util/types.util';\r\n\r\nconst TextInput: React.FC<\r\n  { label: string } & FieldHookConfig<HTMLInputElement> &\r\n    React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>\r\n> = ({ label, ...props }) => {\r\n  const [field, meta] = useField(props);\r\n\r\n  const showError = !!(meta.touched && meta.error);\r\n\r\n  return (\r\n    <div>\r\n      <FloatingInput\r\n        childType=\"input\"\r\n        isError={showError}\r\n        htmlFor={props.id || props.name}\r\n        label={label}\r\n        {...field}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Textarea: React.FC<\r\n  FieldHookConfig<HTMLTextAreaElement> &\r\n    React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLTextAreaElement>, HTMLTextAreaElement>\r\n> = ({ ...props }) => {\r\n  const [field] = useField(props);\r\n\r\n  return (\r\n    <div>\r\n      <FloatingInput childType=\"textarea\" htmlFor={props.id || props.name} {...field} {...props} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Select: React.FC<\r\n  { label: string } & FieldHookConfig<HTMLSelectElement> &\r\n    React.DetailedHTMLProps<React.SelectHTMLAttributes<HTMLSelectElement>, HTMLSelectElement>\r\n> = ({ label, ...props }) => {\r\n  const [field] = useField(props);\r\n\r\n  return (\r\n    <div>\r\n      <FloatingInput\r\n        childType=\"select\"\r\n        htmlFor={props.id || props.name}\r\n        label={label}\r\n        {...field}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\ntype Errors = {\r\n  [field: string]: string;\r\n};\r\n\r\ntype InputElement = {\r\n  readonly elementType: 'input';\r\n  readonly label: string;\r\n  readonly htmlProps: FieldHookConfig<HTMLInputElement> &\r\n    React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>;\r\n};\r\n\r\ntype TextareaElement = {\r\n  readonly elementType: 'textarea';\r\n  readonly htmlProps: FieldHookConfig<HTMLTextAreaElement> &\r\n    React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLTextAreaElement>, HTMLTextAreaElement>;\r\n};\r\n\r\ntype SelectElement = {\r\n  readonly elementType: 'select';\r\n  readonly label: string;\r\n  readonly htmlProps: FieldHookConfig<HTMLSelectElement> &\r\n    React.DetailedHTMLProps<React.SelectHTMLAttributes<HTMLSelectElement>, HTMLSelectElement>;\r\n  readonly childElements: React.ReactNode;\r\n};\r\n\r\ntype FormProps<V extends FormikValues> = {\r\n  readonly initialValues: V;\r\n  readonly validate?: (values: V) => Errors;\r\n  readonly onSubmit: (\r\n    values: V,\r\n    formHelpers: {\r\n      setSubmitting: (arg: boolean) => void;\r\n      setErrors: (arg: V & { formError: string }) => void;\r\n    },\r\n  ) => Promise<void>;\r\n  readonly elements: Array<InputElement | TextareaElement | SelectElement>;\r\n};\r\n\r\nconst Form: <T extends FormikValues>(p: FormProps<T>) => React.ReactElement<FormProps<T>> = ({\r\n  initialValues,\r\n  validate,\r\n  onSubmit,\r\n  elements,\r\n}) => {\r\n  return (\r\n    <Formik\r\n      initialValues={{ ...initialValues, formError: '' }}\r\n      validate={validate}\r\n      onSubmit={async (values, { setSubmitting, setErrors }) => {\r\n        try {\r\n          await onSubmit(values, { setSubmitting, setErrors });\r\n        } catch (e) {\r\n          if (\r\n            (typeof e.message === 'string' && /Network Error/i.test(e.message)) ||\r\n            e.code === 'ECONNABORTED'\r\n          ) {\r\n            setErrors({ formError: `Network error. Please make sure to be online.` } as any);\r\n          } else {\r\n            setErrors({ formError: `Unexpected error occured.` } as any);\r\n          }\r\n          setSubmitting(false);\r\n        }\r\n      }}\r\n    >\r\n      {({ isSubmitting, errors }) => (\r\n        <FormikForm className={styles.form}>\r\n          <div className={styles.inputContainer}>\r\n            {elements.map((el, idx) => {\r\n              const childElem =\r\n                el.elementType === 'input' ? (\r\n                  <TextInput label={el.label} {...el.htmlProps} />\r\n                ) : el.elementType === 'select' ? (\r\n                  <Select label={el.label} {...el.htmlProps}>\r\n                    {el.childElements}\r\n                  </Select>\r\n                ) : el.elementType === 'textarea' ? (\r\n                  <Textarea {...el.htmlProps} />\r\n                ) : (\r\n                  assertUnreachable(el)\r\n                );\r\n\r\n              const isLastElem = idx === elements.length - 1;\r\n\r\n              return (\r\n                <React.Fragment key={idx}>\r\n                  {childElem}\r\n                  {/* omit divider for last element */}\r\n                  {isLastElem ? null : <div className={styles.inputDivider} />}\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </div>\r\n          {errors.formError && errors.formError.length && errors.formError.length > 0 && (\r\n            <ul className={styles.errorList}>\r\n              <li>\r\n                <span>{errors.formError}</span>\r\n              </li>\r\n            </ul>\r\n          )}\r\n          <Button\r\n            className={styles.button}\r\n            buttonType=\"primary\"\r\n            type=\"submit\"\r\n            disabled={isSubmitting}\r\n            isLoading={isSubmitting}\r\n          >\r\n            Continue\r\n          </Button>\r\n        </FormikForm>\r\n      )}\r\n    </Formik>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import { HttpStatus } from './http-status.enum';\r\n\r\nexport class HttpException extends Error {\r\n  private errorText: string;\r\n  private status: HttpStatus;\r\n  /**\r\n   * Instantiate a plain HTTP Exception.\r\n   *\r\n   * @example\r\n   * `throw new HttpException()`\r\n   *\r\n   * @param errorText string describing the error condition.\r\n   * @param status HTTP response status code\r\n   */\r\n  constructor(errorText: string, status: HttpStatus) {\r\n    super();\r\n    this.errorText = errorText;\r\n    this.status = status;\r\n    this.message = errorText;\r\n  }\r\n  getResponse() {\r\n    return this.errorText;\r\n  }\r\n  getStatus() {\r\n    return this.status;\r\n  }\r\n  toString() {\r\n    return `HttpException: status=${this.status}, errorText='${this.errorText}'`;\r\n  }\r\n}\r\n","/* eslint-disable no-console */\r\n/* tslint:disable no-console */\r\n\r\nexport const createLogger = (context: string) => {\r\n  const logWithContext = (logFn: (message?: any, ...optionalParams: any[]) => void) => (\r\n    message?: any,\r\n    ...optionalParams: any[]\r\n  ) => logFn(`[${context}] ${message}`, ...optionalParams);\r\n\r\n  return {\r\n    debug: logWithContext(console.debug),\r\n    info: logWithContext(console.info),\r\n    error: logWithContext(console.error),\r\n    dir: logWithContext(console.dir),\r\n    group: console.group,\r\n    groupEnd: console.groupEnd,\r\n  };\r\n};\r\n","import axios from 'axios';\r\n\r\nimport { HttpException } from './http.exception';\r\nimport { createLogger } from '../logger/logger';\r\n\r\nimport {\r\n  LoginRequest,\r\n  ImportUsersResponse,\r\n  ImportUsersRequest,\r\n  AuthResponse,\r\n  RefreshRequest,\r\n  ImportDocumentsReq,\r\n  ImportDocumentsResp,\r\n  ImportQueriesReq,\r\n  ImportQueriesResp,\r\n  ImportJudgementPairsReq,\r\n  ImportJudgementPairsResp,\r\n  PreloadJudgementResponse,\r\n  SaveJudgement,\r\n  StatisticsResp,\r\n  UpdateConfig,\r\n  SubmitFeedback,\r\n} from '../typings/fira-be-typings';\r\n\r\nconst axiosClient = axios.create({\r\n  baseURL: window.location.origin,\r\n  timeout: 5000,\r\n});\r\nconst logger = createLogger('http.client');\r\nconst REFRESH_RETRY_COUNT = 5;\r\nconst REFRESH_RETRY_DELAY = 3 * 1000; // 3 seconds\r\n\r\nexport const httpClient = {\r\n  login: async (loginRequest: LoginRequest): Promise<AuthResponse> => {\r\n    logger.info('executing login...', { username: loginRequest.username });\r\n\r\n    try {\r\n      return (await axiosClient.post<AuthResponse>('auth/v1/login', loginRequest)).data;\r\n    } catch (e) {\r\n      logger.error('login failed!', e);\r\n      if (e.response?.status === 401) {\r\n        throw new HttpException('credentials invalid', 401);\r\n      }\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  refresh: async (refreshRequest: RefreshRequest): Promise<AuthResponse> => {\r\n    logger.info('executing refresh...', { refreshRequest });\r\n\r\n    // retry refresh with same token 3 times because if the internet connection was idle,\r\n    // ERR_NETWORK_IO_SUSPENDED can occur on the first try\r\n    let attempt = 1;\r\n    let lastError;\r\n    while (attempt <= REFRESH_RETRY_COUNT) {\r\n      try {\r\n        return (await axiosClient.post<AuthResponse>('auth/v1/refresh', refreshRequest)).data;\r\n      } catch (e) {\r\n        logger.info(`refresh failed for attempt=${attempt}`, { error: e });\r\n        lastError = e;\r\n        attempt++;\r\n        if (e.response?.status) {\r\n          // got some response from backend --> no retry necessary\r\n          break;\r\n        }\r\n        if (attempt <= REFRESH_RETRY_COUNT) {\r\n          await timeout(REFRESH_RETRY_DELAY);\r\n        }\r\n      }\r\n    }\r\n    logger.error('refresh failed!', lastError);\r\n    throw lastError;\r\n  },\r\n\r\n  importUsers: async (\r\n    accessToken: string,\r\n    importUsersRequest: ImportUsersRequest,\r\n  ): Promise<ImportUsersResponse> => {\r\n    logger.info('executing import users...', { importUsersRequest });\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.post<ImportUsersResponse>('admin/v1/import/users', importUsersRequest, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('import users failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  importDocuments: async (\r\n    accessToken: string,\r\n    importDocumentsRequest: ImportDocumentsReq,\r\n  ): Promise<ImportDocumentsResp> => {\r\n    logger.info('executing import documents...', { importDocumentsRequest });\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.put<ImportDocumentsResp>(\r\n          'admin/v1/import/documents',\r\n          importDocumentsRequest,\r\n          {\r\n            headers: {\r\n              authorization: `Bearer ${accessToken}`,\r\n            },\r\n          },\r\n        )\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('import documents failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  importQueries: async (\r\n    accessToken: string,\r\n    importQueriesRequest: ImportQueriesReq,\r\n  ): Promise<ImportQueriesResp> => {\r\n    logger.info('executing import queries...', { importQueriesRequest });\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.put<ImportQueriesResp>('admin/v1/import/queries', importQueriesRequest, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('import queries failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  importJudgementPairs: async (\r\n    accessToken: string,\r\n    importJudgPairsRequest: ImportJudgementPairsReq,\r\n  ): Promise<ImportJudgementPairsResp> => {\r\n    logger.info('executing import judgement pairs...', { importJudgPairsRequest });\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.put<ImportJudgementPairsResp>(\r\n          'admin/v1/import/judgement-pairs',\r\n          importJudgPairsRequest,\r\n          {\r\n            headers: {\r\n              authorization: `Bearer ${accessToken}`,\r\n            },\r\n          },\r\n        )\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('import judgement pairs failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  preloadJudgements: async (accessToken: string): Promise<PreloadJudgementResponse> => {\r\n    logger.info('executing preload judgements...');\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.post<PreloadJudgementResponse>('judgements/v1/preload', null, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('preload judgements failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  submitJudgement: async (\r\n    accessToken: string,\r\n    judgementId: number,\r\n    submitJudgementRequest: SaveJudgement,\r\n  ): Promise<void> => {\r\n    logger.info('executing submit judgement...', { submitJudgementRequest });\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.put(`judgements/v1/${judgementId}`, submitJudgementRequest, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('submit judgement failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  submitFeedback: async (\r\n    accessToken: string,\r\n    submitFeedbackRequest: SubmitFeedback,\r\n  ): Promise<void> => {\r\n    logger.info('executing submit feedback...', { submitFeedbackRequest });\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.post(`feedback/v1`, submitFeedbackRequest, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('submit feedback failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  exportJudgements: async (accessToken: string): Promise<string> => {\r\n    logger.info('executing export of judgements...');\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.get(`admin/v1/judgements/export/tsv`, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('export of judgements failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  exportFeedback: async (accessToken: string): Promise<string> => {\r\n    logger.info('executing export of feedback...');\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.get(`admin/v1/feedback/export/tsv`, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('export of feedback failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  updateConfig: async (accessToken: string, updateConfigRequest: UpdateConfig): Promise<void> => {\r\n    logger.info('executing update of config...', { updateConfigRequest });\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.put(`admin/v1/config`, updateConfigRequest, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('update of config failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n\r\n  getStatistics: async (accessToken: string): Promise<StatisticsResp> => {\r\n    logger.info('executing retrieval of statistics...');\r\n\r\n    try {\r\n      return (\r\n        await axiosClient.get(`admin/v1/statistics`, {\r\n          headers: {\r\n            authorization: `Bearer ${accessToken}`,\r\n          },\r\n        })\r\n      ).data;\r\n    } catch (e) {\r\n      logger.error('retrieval of statistics failed!', e);\r\n      throw e;\r\n    }\r\n  },\r\n};\r\n\r\nfunction timeout(ms: number) {\r\n  return new Promise((res) => setTimeout(res, ms));\r\n}\r\n","// fira-be & fira-web shared (duplicated) enums\r\nexport enum JudgementMode {\r\n  PLAIN_RELEVANCE_SCORING = 'PLAIN_RELEVANCE_SCORING',\r\n  SCORING_AND_SELECT_SPANS = 'SCORING_AND_SELECT_SPANS',\r\n}\r\n\r\nexport enum RelevanceLevel {\r\n  NOT_RELEVANT = '0_NOT_RELEVANT',\r\n  TOPIC_RELEVANT_DOES_NOT_ANSWER = '1_TOPIC_RELEVANT_DOES_NOT_ANSWER',\r\n  GOOD_ANSWER = '2_GOOD_ANSWER',\r\n  PERFECT_ANSWER = '3_PERFECT_ANSWER',\r\n  MISLEADING_ANSWER = '-1_MISLEADING_ANSWER',\r\n}\r\n\r\nexport enum FeedbackScore {\r\n  VERY_GOOD = 'VERY_GOOD',\r\n  GOOD = 'GOOD',\r\n  DECENT = 'DECENT',\r\n  DONT_LIKE_IT = 'DONT_LIKE_IT',\r\n}\r\n\r\n// fira-web exclusive enums\r\nexport enum UserRole {\r\n  ANNOTATOR = 'ANNOTATOR',\r\n  ADMIN = 'ADMIN',\r\n}\r\n\r\nexport type RateLevelType = {\r\n  readonly relevanceLevel: RelevanceLevel;\r\n  readonly annotationRequired: boolean;\r\n};\r\n\r\nexport const RateLevels: RateLevelType[] = [\r\n  {\r\n    relevanceLevel: RelevanceLevel.NOT_RELEVANT,\r\n    annotationRequired: false,\r\n  },\r\n  {\r\n    relevanceLevel: RelevanceLevel.MISLEADING_ANSWER,\r\n    annotationRequired: true,\r\n  },\r\n  {\r\n    relevanceLevel: RelevanceLevel.TOPIC_RELEVANT_DOES_NOT_ANSWER,\r\n    annotationRequired: false,\r\n  },\r\n  {\r\n    relevanceLevel: RelevanceLevel.GOOD_ANSWER,\r\n    annotationRequired: true,\r\n  },\r\n  {\r\n    relevanceLevel: RelevanceLevel.PERFECT_ANSWER,\r\n    annotationRequired: true,\r\n  },\r\n];\r\n","import { createLogger } from '../logger/logger';\r\n\r\ntype LocalStorageUser = {\r\n  accessToken: string;\r\n  refreshToken: string;\r\n  acknowledgedInfoPage: boolean;\r\n};\r\n\r\nconst USER_KEY = 'user';\r\n\r\nconst logger = createLogger('browser-storage');\r\n\r\nexport const browserStorage = {\r\n  saveUser: (user: LocalStorageUser) => {\r\n    logger.info('saveUser called', { user });\r\n\r\n    localStorage.setItem(USER_KEY, JSON.stringify(user));\r\n  },\r\n\r\n  clearUser: () => {\r\n    logger.info('clearUser called');\r\n\r\n    localStorage.removeItem(USER_KEY);\r\n  },\r\n\r\n  getUser: (): LocalStorageUser | null => {\r\n    logger.info('getUser called');\r\n\r\n    const storedUser = localStorage.getItem(USER_KEY);\r\n    if (!storedUser) {\r\n      logger.info('no user found');\r\n      return null;\r\n    }\r\n    logger.info('user found', { currentlyStoredUser: storedUser });\r\n    return JSON.parse(storedUser) as LocalStorageUser;\r\n  },\r\n};\r\n","import moment from 'moment';\r\n\r\nimport { browserStorage } from '../../browser-storage/browser-storage';\r\nimport { authStories } from '../../stories/auth.stories';\r\nimport { createLogger } from '../../logger/logger';\r\nimport { RootStore } from '../store';\r\n\r\nconst logger = createLogger('user.subscriptions');\r\n\r\nexport const setupSubscriptions = (store: RootStore) => {\r\n  // listen for changes on user state and synchronize with browser storage\r\n  const REFRESH_OFFSET = moment.duration(1, 'minutes');\r\n  let currentUser = store.getState().user;\r\n  let scheduleId: NodeJS.Timeout | undefined;\r\n\r\n  store.subscribe(() => {\r\n    const userOfStore = store.getState().user;\r\n    if (userOfStore !== currentUser) {\r\n      logger.info('user changed', { previousUser: currentUser, userOfStore });\r\n\r\n      currentUser = userOfStore;\r\n\r\n      // clear old schedule of refresh of token, if present\r\n      if (scheduleId) {\r\n        clearTimeout(scheduleId);\r\n      }\r\n\r\n      if (!currentUser) {\r\n        // if no user is present (e.g., logout was executed), clear scheduled refresh and browser storage\r\n        logger.info('no user present, clear scheduled refresh and browser storage');\r\n        return browserStorage.clearUser();\r\n      }\r\n\r\n      // save new user in browser storage\r\n      browserStorage.saveUser({\r\n        accessToken: currentUser.accessToken.val,\r\n        refreshToken: currentUser.refreshToken.val,\r\n        acknowledgedInfoPage: currentUser.acknowledgedInfoPage,\r\n      });\r\n      logger.info('user saved to browser storage');\r\n\r\n      // schedule refresh of token\r\n      const expiry = moment.unix(currentUser.accessToken.expiry);\r\n      const timeStampToRefresh = expiry.subtract(REFRESH_OFFSET);\r\n      const timeUntilRefreshMs = moment\r\n        .duration(timeStampToRefresh.diff(moment()))\r\n        .asMilliseconds();\r\n      const refreshToken = currentUser.refreshToken.val;\r\n\r\n      scheduleId = setTimeout(async () => {\r\n        await authStories.refresh(refreshToken);\r\n      }, timeUntilRefreshMs);\r\n\r\n      logger.info(`refresh got scheduled, scheduled at: ${timeStampToRefresh.toString()}`);\r\n    }\r\n  });\r\n};\r\n","import { createAction, createReducer } from '@reduxjs/toolkit';\r\n\r\nimport { PreloadJudgement } from '../../typings/fira-be-typings';\r\nimport { RelevanceLevel, RateLevels } from '../../typings/enums';\r\nimport { actions as userActions } from '../user/user.slice';\r\n\r\nexport enum JudgementPairStatus {\r\n  TO_JUDGE = 'TO_JUDGE',\r\n  SEND_PENDING = 'SEND_PENDING',\r\n  SEND_SUCCESS = 'SEND_SUCCESS',\r\n  SEND_FAILED = 'SEND_FAILED',\r\n}\r\n\r\nexport type JudgementPair = PreloadJudgement & {\r\n  readonly relevanceLevel?: RelevanceLevel;\r\n  readonly currentAnnotationStart?: number;\r\n  readonly annotatedRanges: Array<{ start: number; end: number }>;\r\n  readonly status: JudgementPairStatus;\r\n};\r\n\r\ntype AnnotationState = {\r\n  readonly judgementPairs: JudgementPair[];\r\n  readonly alreadyFinished?: number;\r\n  readonly remainingToFinish?: number;\r\n  readonly remainingUntilFirstFeedbackRequired?: number;\r\n  readonly countOfFeedbacks?: number;\r\n  readonly countOfNotPreloadedPairs?: number;\r\n  readonly currentJudgementPairId?: PreloadJudgement['id'];\r\n  readonly currentJudgementPairSelectedOnMs?: number; // unix timestamp\r\n};\r\n\r\ntype PreloadJudgementsPayload = {\r\n  readonly judgements: PreloadJudgement[];\r\n  readonly alreadyFinished: number;\r\n  readonly remainingToFinish: number;\r\n  readonly remainingUntilFirstFeedbackRequired: number;\r\n  readonly countOfFeedbacks: number;\r\n  readonly countOfNotPreloadedPairs: number;\r\n};\r\n\r\ntype RateJudgementPairPayload = {\r\n  readonly relevanceLevel: RelevanceLevel;\r\n};\r\n\r\ntype SelectRangeStartEndPayload = {\r\n  readonly annotationPartIndex: number;\r\n};\r\n\r\ntype DeleteRangePayload = {\r\n  readonly annotationPartIndex: number;\r\n};\r\n\r\ntype SetJudgementStatusPayload = {\r\n  readonly id: PreloadJudgement['id'];\r\n  readonly status: JudgementPairStatus;\r\n};\r\n\r\nconst INITIAL_STATE = { judgementPairs: [] } as AnnotationState;\r\n\r\nconst preloadJudgements = createAction<PreloadJudgementsPayload>('JUDGEMENTS_PRELOADED');\r\nconst rateJudgementPair = createAction<RateJudgementPairPayload>('JUDGEMENT_PAIR_RATED');\r\nconst selectRangeStartEnd = createAction<SelectRangeStartEndPayload>('RANGE_STARTOREND_SELECTED');\r\nconst deleteRange = createAction<DeleteRangePayload>('RANGE_DELETED');\r\nconst setJudgementStatus = createAction<SetJudgementStatusPayload>('JUDGEMENT_STATUS_SET');\r\nconst selectJudgementPair = createAction<JudgementPair | undefined>('JUDGEMENT_PAIR_SELECTED');\r\n\r\nconst reducer = createReducer(INITIAL_STATE, (builder) =>\r\n  builder\r\n    .addCase(preloadJudgements, (state, action) => {\r\n      state.alreadyFinished = action.payload.alreadyFinished;\r\n      state.remainingToFinish = action.payload.remainingToFinish;\r\n      state.remainingUntilFirstFeedbackRequired =\r\n        action.payload.remainingUntilFirstFeedbackRequired;\r\n      state.countOfFeedbacks = action.payload.countOfFeedbacks;\r\n      state.countOfNotPreloadedPairs = action.payload.countOfNotPreloadedPairs;\r\n\r\n      const judgementPairsReceived = action.payload.judgements;\r\n\r\n      state.judgementPairs = judgementPairsReceived.map((judgement) => {\r\n        const localEquivalentPair = state.judgementPairs.find((pair) => pair.id === judgement.id);\r\n        if (localEquivalentPair && areJudgementPairsEqual(localEquivalentPair, judgement)) {\r\n          // keep local data of judgement pair\r\n          return {\r\n            ...judgement,\r\n            ...localEquivalentPair,\r\n          };\r\n        } else {\r\n          // either there is no local data for this judgement pair received from server, or\r\n          // the data of the pair changed significantly\r\n          // --> do not keep local data for this pair\r\n          return {\r\n            ...judgement,\r\n            annotatedRanges: [],\r\n            status: JudgementPairStatus.TO_JUDGE,\r\n          };\r\n        }\r\n      });\r\n    })\r\n    .addCase(rateJudgementPair, (state, action) => {\r\n      const currentJudgementPair = state.judgementPairs.find(\r\n        (pair) => pair.id === state.currentJudgementPairId,\r\n      );\r\n      currentJudgementPair!.relevanceLevel = action.payload.relevanceLevel;\r\n      const currentRateLevel = RateLevels.find(\r\n        (rateLevel) => rateLevel.relevanceLevel === currentJudgementPair!.relevanceLevel,\r\n      );\r\n\r\n      // clear annotated ranges and current annotation start if\r\n      // rating is changed to a level which does not require annotation of ranges\r\n      if (!currentRateLevel!.annotationRequired) {\r\n        currentJudgementPair!.annotatedRanges = [];\r\n        currentJudgementPair!.currentAnnotationStart = undefined;\r\n      }\r\n    })\r\n    .addCase(selectRangeStartEnd, (state, action) => {\r\n      const currentJudgementPair = state.judgementPairs.find(\r\n        (pair) => pair.id === state.currentJudgementPairId,\r\n      );\r\n      if (currentJudgementPair!.currentAnnotationStart === undefined) {\r\n        // the start of an annotation range was selected\r\n        // if the user selected a whitespace, start the selection at the next word\r\n        let selectedPartIdx = action.payload.annotationPartIndex;\r\n        if (currentJudgementPair!.docAnnotationParts[selectedPartIdx] === ' ') {\r\n          selectedPartIdx++;\r\n        }\r\n\r\n        currentJudgementPair!.currentAnnotationStart = selectedPartIdx;\r\n      } else {\r\n        // the end of an annotation range was selected --> save the annotated range\r\n        // if the user selected a whitespace, end the selection at the previous word\r\n        let selectedPartIdx = action.payload.annotationPartIndex;\r\n        if (currentJudgementPair!.docAnnotationParts[selectedPartIdx] === ' ') {\r\n          selectedPartIdx--;\r\n        }\r\n\r\n        const start = currentJudgementPair!.currentAnnotationStart;\r\n        const end = selectedPartIdx;\r\n        const actualStart = start < end ? start : end;\r\n        const actualEnd = end > start ? end : start;\r\n\r\n        // edge case: it's possible that the user selected start/end so that it overlaps\r\n        // another range which got previously selected. Remove such ranges\r\n        currentJudgementPair!.annotatedRanges = currentJudgementPair!.annotatedRanges.filter(\r\n          (range) => !(range.start >= actualStart && range.end <= actualEnd),\r\n        );\r\n\r\n        // then, add new range to the annotated ranges, and clear current annotation start\r\n        currentJudgementPair!.annotatedRanges.push({\r\n          start: actualStart,\r\n          end: actualEnd,\r\n        });\r\n        currentJudgementPair!.currentAnnotationStart = undefined;\r\n      }\r\n    })\r\n    .addCase(deleteRange, (state, action) => {\r\n      const currentJudgementPair = state.judgementPairs.find(\r\n        (pair) => pair.id === state.currentJudgementPairId,\r\n      );\r\n      currentJudgementPair!.annotatedRanges = currentJudgementPair!.annotatedRanges.filter(\r\n        (range) => {\r\n          return !(\r\n            action.payload.annotationPartIndex >= range.start &&\r\n            action.payload.annotationPartIndex <= range.end\r\n          );\r\n        },\r\n      );\r\n    })\r\n    .addCase(setJudgementStatus, (state, action) => {\r\n      const judgementPair = state.judgementPairs.find((pair) => pair.id === action.payload.id);\r\n      judgementPair!.status = action.payload.status;\r\n    })\r\n    .addCase(selectJudgementPair, (state, action) => {\r\n      if (state.currentJudgementPairId !== action.payload?.id) {\r\n        state.currentJudgementPairId = action.payload?.id;\r\n        state.currentJudgementPairSelectedOnMs = new Date().getTime();\r\n      }\r\n    })\r\n    .addCase(userActions.logout, () => {\r\n      // on logout, erase annotation state\r\n      return INITIAL_STATE;\r\n    }),\r\n);\r\n\r\nfunction areJudgementPairsEqual(jp1: PreloadJudgement, jp2: PreloadJudgement) {\r\n  return (\r\n    jp1.queryText === jp2.queryText &&\r\n    jp1.docAnnotationParts.length === jp2.docAnnotationParts.length &&\r\n    !jp1.docAnnotationParts.some((part, index) => jp2.docAnnotationParts[index] !== part)\r\n  );\r\n}\r\n\r\nexport const actions = {\r\n  preloadJudgements,\r\n  rateJudgementPair,\r\n  selectRangeStartEnd,\r\n  deleteRange,\r\n  setJudgementStatus,\r\n  selectJudgementPair,\r\n};\r\nexport default reducer;\r\n","import { createAction, createReducer } from '@reduxjs/toolkit';\r\nimport * as jwt from 'jsonwebtoken';\r\n\r\nimport { JwtPayload } from '../../typings/fira-be-typings';\r\nimport { UserRole } from '../../typings/enums';\r\nimport { assertUnreachable } from '../../util/types.util';\r\n\r\ntype UserState = null | {\r\n  readonly accessToken: {\r\n    readonly val: string;\r\n    readonly expiry: number; // unix timestamp\r\n  };\r\n  readonly refreshToken: {\r\n    readonly val: string;\r\n    readonly expiry: number; // unix timestamp\r\n  };\r\n  readonly acknowledgedInfoPage: boolean;\r\n  readonly acknowledgedFinishedPage: boolean;\r\n  readonly role: UserRole;\r\n};\r\n\r\ntype AuthenticatePayload = {\r\n  accessToken: string;\r\n  refreshToken: string;\r\n};\r\ntype AcknowledgePagePayload = {\r\n  page: 'INFO' | 'FINISHED';\r\n};\r\n\r\nconst INITIAL_STATE = null as UserState;\r\nconst DEFAULT_ACKNOWLEDGED_INFO_PAGE = false;\r\nconst DEFAULT_ACKNOWLEDGED_FINISHED_PAGE = false;\r\n\r\nconst authenticate = createAction<AuthenticatePayload>('AUTHENTICATED');\r\nconst acknowledgePage = createAction<AcknowledgePagePayload>('ACKNOWLEDGED_PAGE');\r\nconst logout = createAction<void>('LOGGED_OUT');\r\nconst reducer = createReducer(INITIAL_STATE, (builder) =>\r\n  builder\r\n    .addCase(authenticate, (state, action) => {\r\n      const accessTokenJwtPayload = jwt.decode(action.payload.accessToken) as JwtPayload;\r\n      const refreshTokenJwtPayload = jwt.decode(action.payload.refreshToken) as JwtPayload;\r\n      const isAdmin = !!accessTokenJwtPayload.resource_access?.['realm-management']?.roles?.some(\r\n        (role) => role === 'manage-users',\r\n      );\r\n\r\n      const acknowledgedInfoPage = state?.acknowledgedInfoPage ?? DEFAULT_ACKNOWLEDGED_INFO_PAGE;\r\n      const acknowledgedFinishedPage =\r\n        state?.acknowledgedFinishedPage ?? DEFAULT_ACKNOWLEDGED_FINISHED_PAGE;\r\n\r\n      return {\r\n        ...state,\r\n        accessToken: {\r\n          val: action.payload.accessToken,\r\n          expiry: accessTokenJwtPayload.exp,\r\n        },\r\n        refreshToken: {\r\n          val: action.payload.refreshToken,\r\n          expiry: refreshTokenJwtPayload.exp,\r\n        },\r\n        acknowledgedInfoPage,\r\n        acknowledgedFinishedPage,\r\n        role: isAdmin ? UserRole.ADMIN : UserRole.ANNOTATOR,\r\n      };\r\n    })\r\n    .addCase(acknowledgePage, (state, action) => {\r\n      if (action.payload.page === 'INFO') {\r\n        state!.acknowledgedInfoPage = true;\r\n      } else if (action.payload.page === 'FINISHED') {\r\n        state!.acknowledgedFinishedPage = true;\r\n      } else {\r\n        assertUnreachable(action.payload.page);\r\n      }\r\n    })\r\n    .addCase(logout, () => {\r\n      return INITIAL_STATE;\r\n    }),\r\n);\r\n\r\nexport const actions = { authenticate, acknowledgePage, logout };\r\nexport default reducer;\r\n","import { httpClient } from '../http/http.client';\r\nimport { createLogger } from '../logger/logger';\r\nimport { store } from '../store/store';\r\nimport {\r\n  actions as annotationActions,\r\n  JudgementPairStatus,\r\n} from '../store/annotation/annotation.slice';\r\nimport { RelevanceLevel, RateLevels } from '../typings/enums';\r\n\r\nconst logger = createLogger('judgements.service');\r\n\r\nexport const judgementStories = {\r\n  preloadJudgements: async () => {\r\n    logger.info(`executing preload judgements...`);\r\n\r\n    const response = await httpClient.preloadJudgements(store.getState().user!.accessToken.val);\r\n\r\n    logger.info(`preload judgements succeeded! dispatching preload judgements...`, { response });\r\n    store.dispatch(annotationActions.preloadJudgements(response));\r\n  },\r\n\r\n  rateJudgementPair: async (relevanceLevel: RelevanceLevel) => {\r\n    logger.info(`executing rate judgement pair...`);\r\n\r\n    store.dispatch(annotationActions.rateJudgementPair({ relevanceLevel }));\r\n\r\n    const annotationState = store.getState().annotation;\r\n    const currentJudgementPair = annotationState.judgementPairs.find(\r\n      (pair) => pair.id === annotationState.currentJudgementPairId,\r\n    )!;\r\n    const currentRateLevel = RateLevels.find(\r\n      (rateLevel) => rateLevel.relevanceLevel === currentJudgementPair.relevanceLevel,\r\n    );\r\n\r\n    if (!currentRateLevel!.annotationRequired || currentJudgementPair!.annotatedRanges.length > 0) {\r\n      // if the chosen rate level does not require annotation, or it does and regions are\r\n      // annotated already,\r\n      // immediately submit current judgement and proceed\r\n      await judgementStories.submitCurrentJudgement();\r\n    }\r\n\r\n    logger.info(`rate judgement pair succeeded!`);\r\n  },\r\n\r\n  submitCurrentJudgement: async () => {\r\n    logger.info(`executing submit current judgement...`);\r\n\r\n    const annotationState = store.getState().annotation;\r\n    const currentJudgementPair = annotationState.judgementPairs.find(\r\n      (pair) => pair.id === annotationState.currentJudgementPairId,\r\n    )!;\r\n    const relevancePositions: number[] = [];\r\n    for (const annotatedRange of currentJudgementPair.annotatedRanges) {\r\n      for (let i = annotatedRange.start; i <= annotatedRange.end; i++) {\r\n        relevancePositions.push(i);\r\n      }\r\n    }\r\n\r\n    const now = new Date().getTime();\r\n    const durationUsedToJudgeMs = now - annotationState.currentJudgementPairSelectedOnMs!;\r\n\r\n    store.dispatch(\r\n      annotationActions.setJudgementStatus({\r\n        id: currentJudgementPair.id,\r\n        status: JudgementPairStatus.SEND_PENDING,\r\n      }),\r\n    );\r\n\r\n    try {\r\n      await httpClient.submitJudgement(\r\n        store.getState().user!.accessToken.val,\r\n        currentJudgementPair.id,\r\n        {\r\n          relevanceLevel: currentJudgementPair.relevanceLevel!,\r\n          relevancePositions,\r\n          durationUsedToJudgeMs,\r\n        },\r\n      );\r\n    } catch (error) {\r\n      logger.error(`submit current judgement failed!`, { id: currentJudgementPair.id, error });\r\n      store.dispatch(\r\n        annotationActions.setJudgementStatus({\r\n          id: currentJudgementPair.id,\r\n          status: JudgementPairStatus.SEND_FAILED,\r\n        }),\r\n      );\r\n      throw error;\r\n    }\r\n\r\n    store.dispatch(\r\n      annotationActions.setJudgementStatus({\r\n        id: currentJudgementPair.id,\r\n        status: JudgementPairStatus.SEND_SUCCESS,\r\n      }),\r\n    );\r\n\r\n    logger.info(`submit current judgement succeeded!`);\r\n  },\r\n};\r\n","import { useDispatch } from 'react-redux';\r\n\r\nexport const useActionsWithDispatch = <T extends {}>(actions: T) => {\r\n  // use type \"Dispatch\" just to clarify that dispatching is automatically done\r\n  type Dispatch<FuncType> = FuncType;\r\n\r\n  type DispatchType = {\r\n    [P in keyof typeof actions]: Dispatch<typeof actions[P]>;\r\n  };\r\n\r\n  const dispatch = useDispatch<any>();\r\n\r\n  const actionsWithDispatch: any = {};\r\n\r\n  for (const action in actions) {\r\n    if (actions.hasOwnProperty(action)) {\r\n      actionsWithDispatch[action] = (...args: any[]) => dispatch((actions as any)[action](...args));\r\n    }\r\n  }\r\n\r\n  return actionsWithDispatch as DispatchType;\r\n};\r\n","import { useSelector } from 'react-redux';\r\n\r\nimport { actions, JudgementPairStatus } from './annotation.slice';\r\nimport { RootState } from '../store';\r\nimport { useActionsWithDispatch } from '../util/actions.util';\r\n\r\nexport const annotationComputations = {\r\n  annotationDataReceivedFromServer: (state: RootState) =>\r\n    state.annotation.remainingToFinish !== undefined,\r\n};\r\n\r\nexport const useAnnotationActions = () => useActionsWithDispatch(actions);\r\n\r\nexport const useAnnotationState = () => {\r\n  const pairsSuccessfullySent = useSelector((state: RootState) =>\r\n    state.annotation.judgementPairs.filter(\r\n      (pair) => pair.status === JudgementPairStatus.SEND_SUCCESS,\r\n    ),\r\n  );\r\n  const currentJudgementPair = useSelector((state: RootState) =>\r\n    state.annotation.judgementPairs.find(\r\n      (pair) => pair.id === state.annotation.currentJudgementPairId,\r\n    ),\r\n  );\r\n\r\n  const annotationDataReceivedFromServer = useSelector(\r\n    annotationComputations.annotationDataReceivedFromServer,\r\n  );\r\n  const remainingToFinish = useSelector((state: RootState) =>\r\n    !annotationDataReceivedFromServer\r\n      ? undefined\r\n      : state.annotation.remainingToFinish! - pairsSuccessfullySent.length,\r\n  );\r\n  const remainingUntilFirstFeedbackRequired = useSelector((state: RootState) =>\r\n    !annotationDataReceivedFromServer\r\n      ? undefined\r\n      : state.annotation.remainingUntilFirstFeedbackRequired! - pairsSuccessfullySent.length,\r\n  );\r\n  const countOfFeedbacks = useSelector((state: RootState) => state.annotation.countOfFeedbacks);\r\n  const countOfNotPreloadedPairs = useSelector(\r\n    (state: RootState) => state.annotation.countOfNotPreloadedPairs,\r\n  );\r\n  const alreadyFinished = useSelector((state: RootState) =>\r\n    !annotationDataReceivedFromServer\r\n      ? undefined\r\n      : state.annotation.alreadyFinished! + pairsSuccessfullySent.length,\r\n  );\r\n\r\n  return {\r\n    annotationDataReceivedFromServer,\r\n    remainingToFinish,\r\n    remainingUntilFirstFeedbackRequired,\r\n    countOfFeedbacks,\r\n    countOfNotPreloadedPairs,\r\n    alreadyFinished,\r\n    currentJudgementPair,\r\n  };\r\n};\r\n","import { createLogger } from '../../logger/logger';\r\nimport { RootStore } from '../store';\r\nimport { judgementStories } from '../../stories/judgement.stories';\r\nimport { actions as annotationActions, JudgementPairStatus } from '../annotation/annotation.slice';\r\nimport { UserRole } from '../../typings/enums';\r\nimport { annotationComputations } from './annotation.hooks';\r\n\r\nconst PRELOAD_JUDGEMENTS_THRESHOLD = 1;\r\n\r\nconst logger = createLogger('annotation.subscriptions');\r\n\r\nexport const setupSubscriptions = (store: RootStore) => {\r\n  // if no judgement pairs got loaded from the server yet, execute initial preload of judgement pairs\r\n  store.subscribe(() => {\r\n    const user = store.getState().user;\r\n    if (!user || !user.accessToken) {\r\n      logger.info(\r\n        'no judgement pairs got loaded from the server yet, but there is no access token available --> skip preload',\r\n      );\r\n      return;\r\n    }\r\n    if (user.role !== UserRole.ANNOTATOR) {\r\n      logger.info(\r\n        'no judgement pairs got loaded from the server yet, but user role is not annotator --> skip preload',\r\n      );\r\n      return;\r\n    }\r\n\r\n    if (!annotationComputations.annotationDataReceivedFromServer(store.getState())) {\r\n      logger.info('no judgement pairs got loaded from the server yet --> execute preload...');\r\n      judgementStories.preloadJudgements();\r\n    }\r\n  });\r\n\r\n  // retrieve judgement pairs from server if count of (local) judgement pairs does not fulfill threshold,\r\n  // and the user did not annotate every possible judgement pair\r\n  const retrieveJudgPairsSubscription: MemoizedSubscription = {\r\n    memoizeOnValue: (subscribedStore) => subscribedStore.getState().annotation.judgementPairs,\r\n    listener: (subscribedStore) => {\r\n      const annotationState = subscribedStore.getState().annotation;\r\n\r\n      if (annotationComputations.annotationDataReceivedFromServer(subscribedStore.getState())) {\r\n        const countOfOpenJudgementPairs = annotationState.judgementPairs.filter(\r\n          (pair) =>\r\n            pair.status === JudgementPairStatus.TO_JUDGE ||\r\n            pair.status === JudgementPairStatus.SEND_PENDING,\r\n        ).length;\r\n        const countOfNotPreloadedPairs = annotationState.countOfNotPreloadedPairs!;\r\n        if (\r\n          countOfOpenJudgementPairs <= PRELOAD_JUDGEMENTS_THRESHOLD &&\r\n          countOfNotPreloadedPairs > 0\r\n        ) {\r\n          logger.info(\r\n            'count of preloaded judgement pairs does not fulfill threshold and ' +\r\n              'there are remaining judgements to preload on the server --> execute preload...',\r\n          );\r\n          judgementStories.preloadJudgements();\r\n        }\r\n      }\r\n    },\r\n  };\r\n  addMemoizedSubscription(store, retrieveJudgPairsSubscription);\r\n\r\n  // set new currently selected judgement pair if list of judgement pairs changes\r\n  const setNextSelectedPairSubscription: MemoizedSubscription = {\r\n    memoizeOnValue: (subscribedStore) => subscribedStore.getState().annotation.judgementPairs,\r\n    listener: (subscribedStore) => {\r\n      const judgePairsOfStore = subscribedStore.getState().annotation.judgementPairs;\r\n\r\n      // select first pair which neither gets currently sent to the server nor was already sent to the server\r\n      const nextPair = judgePairsOfStore.find(\r\n        (pair) => pair.status === JudgementPairStatus.TO_JUDGE,\r\n      );\r\n      subscribedStore.dispatch(annotationActions.selectJudgementPair(nextPair));\r\n    },\r\n  };\r\n  addMemoizedSubscription(store, setNextSelectedPairSubscription);\r\n};\r\n\r\ntype MemoizedSubscription = {\r\n  memoizeOnValue: (subscribedStore: RootStore) => any;\r\n  listener: (subscribedStore: RootStore) => void;\r\n};\r\n\r\nfunction addMemoizedSubscription(store: RootStore, subscription: MemoizedSubscription) {\r\n  let memoizedValue = subscription.memoizeOnValue(store);\r\n  store.subscribe(() => {\r\n    const newValueOfStore = subscription.memoizeOnValue(store);\r\n    if (memoizedValue !== newValueOfStore) {\r\n      memoizedValue = newValueOfStore;\r\n      subscription.listener(store);\r\n    }\r\n  });\r\n}\r\n","import { createLogger } from '../../logger/logger';\r\n\r\nconst logger = createLogger('store-logger-middleware');\r\n\r\nconst loggerMiddleware = (store: any) => (next: any) => (action: any) => {\r\n  logger.group(action.type);\r\n  logger.info('dispatching', action);\r\n  const result = next(action);\r\n  logger.info('next state', store.getState());\r\n  logger.groupEnd();\r\n  return result;\r\n};\r\n\r\nexport default loggerMiddleware;\r\n","import { combineReducers } from '@reduxjs/toolkit';\r\n\r\nimport userReducer from './user/user.slice';\r\nimport annotationReducer from './annotation/annotation.slice';\r\n\r\nexport default combineReducers({\r\n  user: userReducer,\r\n  annotation: annotationReducer,\r\n});\r\n","import { configureStore, getDefaultMiddleware } from '@reduxjs/toolkit';\r\n\r\nimport { setupSubscriptions as setupUserSubscriptions } from './user/user.subscriptions';\r\nimport { setupSubscriptions as setupAnnotationSubscriptions } from './annotation/annotation.subscriptions';\r\nimport loggerMiddleware from './middleware/logger';\r\n\r\nimport rootReducer from './reducers';\r\n\r\nexport const store = configureStore({\r\n  reducer: rootReducer,\r\n  middleware: [loggerMiddleware, ...getDefaultMiddleware()],\r\n});\r\n\r\nif (process.env.NODE_ENV !== 'production' && (module as any).hot) {\r\n  (module as any).hot.accept('./reducers', () => store.replaceReducer(rootReducer));\r\n}\r\n\r\nconst subscriptions = [setupUserSubscriptions, setupAnnotationSubscriptions];\r\nsubscriptions.forEach((subscription) => subscription(store));\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport type RootStore = typeof store;\r\nexport type AppDispatch = RootStore['dispatch'];\r\n","import { httpClient } from '../http/http.client';\r\nimport { store } from '../store/store';\r\nimport { createLogger } from '../logger/logger';\r\nimport { actions as userActions } from '../store/user/user.slice';\r\n\r\nconst logger = createLogger('auth.service');\r\n\r\nexport const authStories = {\r\n  login: async (username: string, password: string) => {\r\n    logger.info(`executing login...`, { username });\r\n\r\n    const loginResponse = await httpClient.login({ username, password });\r\n\r\n    logger.info(`login succeeded! dispatching authenticate...`, { loginResponse });\r\n    store.dispatch(userActions.authenticate(loginResponse));\r\n  },\r\n\r\n  refresh: async (refreshToken: string) => {\r\n    logger.info(`executing refresh...`, { refreshToken });\r\n\r\n    let refreshResponse;\r\n    try {\r\n      refreshResponse = await httpClient.refresh({ refreshToken });\r\n    } catch (err) {\r\n      logger.error(`refresh failed! dispatching logout...`, err);\r\n      store.dispatch(userActions.logout());\r\n      return;\r\n    }\r\n\r\n    logger.info(`refresh succeeded! dispatching authenticate...`, { refreshResponse });\r\n    store.dispatch(userActions.authenticate(refreshResponse));\r\n  },\r\n};\r\n","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport styles from './Login.module.css';\r\nimport Form from '../elements/forms/Form';\r\nimport { authStories } from '../../stories/auth.stories';\r\nimport { RootState } from '../../store/store';\r\n\r\nconst Login: React.FC = () => {\r\n  const user = useSelector((state: RootState) => state.user);\r\n  const loggedIn = !!user;\r\n\r\n  if (loggedIn) {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.headline}>\r\n        <h1>Fira</h1>\r\n        <span>Fine-grained Relevance Annotation</span>\r\n      </div>\r\n      <div className={styles.inputArea}>\r\n        <span className={styles.inputHeadline}>Log in</span>\r\n\r\n        <Form\r\n          initialValues={{ username: '', password: '' }}\r\n          validate={(values) => {\r\n            const errors: any = {};\r\n            if (!values.username) {\r\n              errors.username = 'Required';\r\n            }\r\n            if (!values.password) {\r\n              errors.password = 'Required';\r\n            }\r\n            return errors;\r\n          }}\r\n          onSubmit={async (values, { setErrors }) => {\r\n            try {\r\n              await authStories.login(values.username, values.password);\r\n              // omit setSubmitting here because if login was successful, it will redirect and thus unmount the component\r\n            } catch (e) {\r\n              if (typeof e.getStatus === 'function' && e.getStatus() === 401) {\r\n                setErrors({ formError: `Credentials invalid.` } as any);\r\n              }\r\n              throw e;\r\n            }\r\n          }}\r\n          elements={[\r\n            {\r\n              elementType: 'input',\r\n              label: 'Username',\r\n              htmlProps: {\r\n                name: 'username',\r\n                autoCorrect: 'off',\r\n                autoCapitalize: 'off',\r\n              },\r\n            },\r\n            {\r\n              elementType: 'input',\r\n              label: 'Login-Code',\r\n              htmlProps: {\r\n                name: 'password',\r\n                autoComplete: 'off',\r\n                autoCorrect: 'off',\r\n                autoCapitalize: 'off',\r\n              },\r\n            },\r\n          ]}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { httpClient } from '../http/http.client';\r\nimport { createLogger } from '../logger/logger';\r\nimport { store } from '../store/store';\r\nimport { UpdateConfig } from '../typings/fira-be-typings';\r\n\r\nconst logger = createLogger('admin.service');\r\n\r\nexport const adminStories = {\r\n  exportJudgements: async () => {\r\n    logger.info(`executing export of judgements...`);\r\n\r\n    const response = await httpClient.exportJudgements(store.getState().user!.accessToken.val);\r\n    saveTsv('judgements.tsv', response);\r\n\r\n    logger.info(`export of judgements succeeded!`, { response });\r\n  },\r\n\r\n  exportFeedback: async () => {\r\n    logger.info(`executing export of feedback...`);\r\n\r\n    const response = await httpClient.exportFeedback(store.getState().user!.accessToken.val);\r\n    saveTsv('feedback.tsv', response);\r\n\r\n    logger.info(`export of feedback succeeded!`, { response });\r\n  },\r\n\r\n  updateConfig: async (config: UpdateConfig) => {\r\n    logger.info(`executing update of config...`);\r\n\r\n    await httpClient.updateConfig(store.getState().user!.accessToken.val, config);\r\n\r\n    logger.info(`update of config succeeded!`);\r\n  },\r\n\r\n  getStatistics: async () => {\r\n    logger.info(`executing retrieval of statistics...`);\r\n\r\n    const response = await httpClient.getStatistics(store.getState().user!.accessToken.val);\r\n\r\n    logger.info(`retrieval of statistics succeeded!`, { response });\r\n    return response;\r\n  },\r\n};\r\n\r\nfunction saveTsv(filename: string, data: string) {\r\n  const blob = new Blob([data], { type: 'text/tsv' });\r\n  const elem = window.document.createElement('a');\r\n  elem.href = window.URL.createObjectURL(blob);\r\n  elem.download = filename;\r\n  document.body.appendChild(elem);\r\n  elem.click();\r\n  document.body.removeChild(elem);\r\n}\r\n","import { useSelector } from 'react-redux';\r\n\r\nimport { RootState } from '../store';\r\nimport { actions } from './user.slice';\r\nimport { useActionsWithDispatch } from '../util/actions.util';\r\nimport { UserRole } from '../../typings/enums';\r\nimport { assertUnreachable } from '../../util/types.util';\r\n\r\nexport function useUserState() {\r\n  const userRole = useSelector((state: RootState) => {\r\n    if (!state.user) {\r\n      return undefined;\r\n    } else if (state.user.role === UserRole.ADMIN || state.user.role === UserRole.ANNOTATOR) {\r\n      return state.user.role;\r\n    } else {\r\n      assertUnreachable(state.user.role);\r\n    }\r\n  });\r\n  const userAcknowledgedInfoPage = useSelector((state: RootState) => {\r\n    return !!state.user?.acknowledgedInfoPage;\r\n  });\r\n  const userAcknowledgedFinishedPage = useSelector((state: RootState) => {\r\n    return !!state.user?.acknowledgedFinishedPage;\r\n  });\r\n\r\n  return { userRole, userAcknowledgedInfoPage, userAcknowledgedFinishedPage };\r\n}\r\n\r\nexport const useUserActions = () => useActionsWithDispatch(actions);\r\n","// tslint:disable-next-line:no-empty\r\nexport const noop = () => {};\r\n","import React from 'react';\r\n\r\nimport styles from './RateButton.module.css';\r\nimport Button from '../../elements/Button';\r\nimport { RateLevelType, RelevanceLevel } from '../../../typings/enums';\r\n\r\nconst RATE_LEVEL_DATA = {\r\n  [RelevanceLevel.NOT_RELEVANT]: {\r\n    style: styles.notRelevant,\r\n    text: 'Wrong',\r\n    keyboardKey: '1',\r\n  },\r\n  [RelevanceLevel.MISLEADING_ANSWER]: {\r\n    style: styles.misleadingAnswer,\r\n    text: 'Misleading',\r\n    keyboardKey: '2',\r\n  },\r\n  [RelevanceLevel.TOPIC_RELEVANT_DOES_NOT_ANSWER]: {\r\n    style: styles.topicRelevantDoesNotAnswer,\r\n    text: 'Ok',\r\n    keyboardKey: '3',\r\n  },\r\n  [RelevanceLevel.GOOD_ANSWER]: { style: styles.goodAnswer, text: 'Good', keyboardKey: '4' },\r\n  [RelevanceLevel.PERFECT_ANSWER]: {\r\n    style: styles.perfectAnswer,\r\n    text: 'Perfect',\r\n    keyboardKey: '5',\r\n  },\r\n} as const;\r\n\r\nconst RateButton: React.FC<{ rateLevel: RateLevelType; onClick: () => void }> = ({\r\n  rateLevel,\r\n  onClick,\r\n}) => {\r\n  return (\r\n    <div className={styles.container}>\r\n      <Button\r\n        className={`${styles.button} ${RATE_LEVEL_DATA[rateLevel.relevanceLevel].style}`}\r\n        onClick={onClick}\r\n      >\r\n        <div className={styles.hotkey}>{RATE_LEVEL_DATA[rateLevel.relevanceLevel].keyboardKey}</div>\r\n        <span>{RATE_LEVEL_DATA[rateLevel.relevanceLevel].text}</span>\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default RateButton;\r\n","import React from 'react';\r\nimport { Manager, Reference, Popper } from 'react-popper';\r\n\r\nimport styles from './AnnotationPart.module.css';\r\nimport Button from '../../elements/Button';\r\n\r\nconst AnnotationPart: React.FC<{\r\n  idx: string;\r\n  text: string;\r\n  isRangeStart?: boolean;\r\n  isInSelectedRange: boolean;\r\n  showTooltip?: boolean;\r\n  annotationIsAllowedOnPart?: boolean;\r\n  annotationIsAllowedInGeneral: boolean;\r\n  isPlaceholder?: boolean;\r\n  onPartClick: () => void;\r\n  onTooltipClick: () => void;\r\n}> = ({\r\n  idx,\r\n  text,\r\n  isRangeStart = false,\r\n  isInSelectedRange,\r\n  showTooltip = false,\r\n  annotationIsAllowedOnPart = false,\r\n  annotationIsAllowedInGeneral,\r\n  isPlaceholder = false,\r\n  onPartClick,\r\n  onTooltipClick,\r\n}) => {\r\n  // replace blank by fixed-width blank character (otherwise, styles like border/box-shadow don't apply)\r\n  const textToShow = text.replace(' ', '\\u00a0');\r\n\r\n  // set css class if part is start of the current selected range\r\n  const currentRangeStartStyle = isRangeStart ? styles.rangeStart : '';\r\n\r\n  // highlight the span as selectable (e.g., on hover) if annotation on the part is allowed\r\n  const annotationAllowedOnPartStyle = annotationIsAllowedOnPart\r\n    ? styles.annotationAllowedOnPart\r\n    : '';\r\n\r\n  // apply additional styles if annotation is allowed (e.g., spacing for mobile devices)\r\n  const annotationAllowedInGeneralStyle = annotationIsAllowedInGeneral\r\n    ? styles.annotationAllowedInGeneral\r\n    : '';\r\n\r\n  const placeholderStyle = isPlaceholder ? styles.placeholder : '';\r\n\r\n  const annotatePartSpan = (ref?: any) => (\r\n    <span\r\n      ref={ref}\r\n      data-idx={idx}\r\n      onClick={onPartClick}\r\n      className={`${styles.annotatePart} ${currentRangeStartStyle} ${\r\n        !!isInSelectedRange ? styles.isInRange : ''\r\n      } ${annotationAllowedOnPartStyle} ${annotationAllowedInGeneralStyle} ${placeholderStyle}`}\r\n    >\r\n      {textToShow}\r\n    </span>\r\n  );\r\n\r\n  return !showTooltip ? (\r\n    annotatePartSpan()\r\n  ) : (\r\n    <Manager>\r\n      <Reference>{({ ref }) => annotatePartSpan(ref)}</Reference>\r\n      <Popper placement=\"right\">\r\n        {({ ref, style, placement }) => (\r\n          <div ref={ref} style={style} data-placement={placement}>\r\n            <Button className={styles.annotatePartTooltipButton} onClick={onTooltipClick}>\r\n              <svg\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                width=\"12\"\r\n                height=\"14\"\r\n                viewBox=\"5 3 14 18\"\r\n                fill=\"var(--color-destructive)\"\r\n              >\r\n                <path d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\" />\r\n              </svg>\r\n              <span>Remove</span>\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </Popper>\r\n    </Manager>\r\n  );\r\n};\r\n\r\nexport default AnnotationPart;\r\n","import React from 'react';\r\n\r\nimport styles from './Line.module.css';\r\n\r\nconst Line: React.FC<{ orientation: 'horizontal' }> = () => (\r\n  <div className={styles.horizontalLine} />\r\n);\r\n\r\nexport default Line;\r\n","import React, { useState } from 'react';\r\n\r\nimport styles from './Annotation.module.css';\r\nimport { RelevanceLevel, RateLevels, JudgementMode } from '../../../typings/enums';\r\nimport { judgementStories } from '../../../stories/judgement.stories';\r\nimport { noop } from '../../../util/functions';\r\nimport Button from '../../elements/Button';\r\nimport { useKeyupEvent as useKeyupHandler } from '../../util/events.hooks';\r\nimport RateButton from './RateButton';\r\nimport {\r\n  useAnnotationState,\r\n  useAnnotationActions,\r\n} from '../../../store/annotation/annotation.hooks';\r\nimport AnnotationPart from './AnnotationPart';\r\nimport Menu from '../../elements/Menu';\r\nimport Line from '../../elements/Line';\r\n\r\nconst PLACEHOLDER_PREFIX = 'placeholder_';\r\n\r\nconst AnnotationShell: React.FC<{\r\n  finishedFraction: number;\r\n  hideTooltip?: () => void;\r\n  queryComponent?: React.ReactNode;\r\n  documentComponent?: React.ReactNode;\r\n  guideComponent?: React.ReactNode;\r\n}> = ({ finishedFraction, hideTooltip, queryComponent, documentComponent, guideComponent }) => {\r\n  return (\r\n    <>\r\n      <div\r\n        style={{ '--finished-fraction': `${finishedFraction}%` } as any}\r\n        className={styles.progressBar}\r\n      />\r\n      <div className={styles.container} onClickCapture={hideTooltip}>\r\n        <div className={styles.actionBar}>{queryComponent}</div>\r\n        <Line orientation=\"horizontal\" />\r\n        <div className={styles.annotationArea}>{documentComponent}</div>\r\n        <div className={styles.footer}>{guideComponent}</div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nconst Annotation: React.FC = () => {\r\n  const { remainingToFinish, alreadyFinished, currentJudgementPair } = useAnnotationState();\r\n  const { selectRangeStartEnd, deleteRange } = useAnnotationActions();\r\n  const [tooltipAnnotatePartIndex, setTooltipAnnotatePartIndex] = useState<number | undefined>(\r\n    undefined,\r\n  );\r\n\r\n  function createJudgementFn(relevanceLevel: RelevanceLevel) {\r\n    return () => judgementStories.rateJudgementPair(relevanceLevel);\r\n  }\r\n\r\n  useKeyupHandler(\r\n    !currentJudgementPair\r\n      ? {}\r\n      : {\r\n          Digit1: createJudgementFn(RelevanceLevel.NOT_RELEVANT),\r\n          Digit2: createJudgementFn(RelevanceLevel.MISLEADING_ANSWER),\r\n          Digit3: createJudgementFn(RelevanceLevel.TOPIC_RELEVANT_DOES_NOT_ANSWER),\r\n          Digit4: createJudgementFn(RelevanceLevel.GOOD_ANSWER),\r\n          Digit5: createJudgementFn(RelevanceLevel.PERFECT_ANSWER),\r\n        },\r\n  );\r\n\r\n  // compute fraction of finished annotation; used for progress bar\r\n  let finishedFraction;\r\n  if (remainingToFinish === undefined || alreadyFinished === undefined) {\r\n    finishedFraction = 0;\r\n  } else {\r\n    finishedFraction =\r\n      remainingToFinish === undefined\r\n        ? 0\r\n        : (alreadyFinished / (remainingToFinish + alreadyFinished)) * 100;\r\n    if (finishedFraction > 100) {\r\n      // user annotated more than his annotation target --> cap at 100%\r\n      finishedFraction = 100;\r\n    }\r\n  }\r\n\r\n  if (!currentJudgementPair || remainingToFinish === undefined) {\r\n    return <AnnotationShell finishedFraction={finishedFraction} />;\r\n  }\r\n\r\n  const currentRateLevel = RateLevels.find(\r\n    (rateLevel) => rateLevel.relevanceLevel === currentJudgementPair.relevanceLevel,\r\n  );\r\n\r\n  // compute some boolean variables needed to guide the user throw the annotation process\r\n  const ratingRequired = !currentRateLevel;\r\n  const currentSelectionNotFinished = currentJudgementPair.currentAnnotationStart !== undefined;\r\n  const annotationIsAllowedInGeneral =\r\n    currentJudgementPair.mode === JudgementMode.SCORING_AND_SELECT_SPANS;\r\n  const annotationIsRequired =\r\n    annotationIsAllowedInGeneral &&\r\n    !!currentRateLevel?.annotationRequired &&\r\n    currentJudgementPair.annotatedRanges.length === 0;\r\n  const annotationStatus =\r\n    currentRateLevel?.relevanceLevel === RelevanceLevel.MISLEADING_ANSWER\r\n      ? annotationIsRequired\r\n        ? 'MISLEADING_REGION_REQUIRED'\r\n        : 'ADDITIONAL_MISLEADING_REGIONS_ALLOWED'\r\n      : annotationIsRequired\r\n      ? 'RELEVANT_REGION_REQUIRED'\r\n      : 'ADDITIONAL_RELEVANT_REGIONS_ALLOWED';\r\n  const userSelectionAllowed = currentJudgementPair.currentAnnotationStart === undefined;\r\n\r\n  function hideTooltip() {\r\n    setTooltipAnnotatePartIndex(undefined);\r\n  }\r\n\r\n  function annotateOnUserSelect() {\r\n    const selection = window.getSelection();\r\n    if (!selection) {\r\n      return;\r\n    }\r\n\r\n    const anchorNode = selection.anchorNode;\r\n    const focusNode = selection.focusNode;\r\n    if (!anchorNode || !focusNode) {\r\n      return;\r\n    }\r\n\r\n    let currentNode: Node | (Node & ParentNode) | null = anchorNode;\r\n    let anchorIdx: string | undefined;\r\n    while (currentNode) {\r\n      if ((currentNode as any).dataset?.idx) {\r\n        anchorIdx = (currentNode as any).dataset.idx;\r\n        break;\r\n      }\r\n      currentNode = currentNode.parentNode;\r\n    }\r\n    if (!anchorIdx) {\r\n      // no anchor, i.e. start of selection, found\r\n      // --> stop\r\n      return;\r\n    }\r\n\r\n    currentNode = focusNode;\r\n    let focusIdx: string | undefined;\r\n    while (currentNode) {\r\n      if ((currentNode as any).dataset?.idx) {\r\n        focusIdx = (currentNode as any).dataset.idx;\r\n        break;\r\n      }\r\n      currentNode = currentNode.parentNode;\r\n    }\r\n    if (!focusIdx) {\r\n      // no focus, i.e. end of selection, found\r\n      // --> stop\r\n      return;\r\n    }\r\n\r\n    // idX got extracted --> remove user selection\r\n    window.getSelection()?.empty();\r\n\r\n    // if one of the placeholder got selected, strip of placeholder prefix\r\n    anchorIdx = anchorIdx.replace(PLACEHOLDER_PREFIX, '');\r\n    focusIdx = focusIdx.replace(PLACEHOLDER_PREFIX, '');\r\n\r\n    // if anchorIdx and focusIdx are the same, it was likely just a click on an element\r\n    // --> stop\r\n    if (anchorIdx === focusIdx) {\r\n      return;\r\n    }\r\n\r\n    // both anchorIdx and focusIdx found --> add annotation\r\n    selectRangeStartEnd({ annotationPartIndex: Number(anchorIdx) });\r\n    selectRangeStartEnd({ annotationPartIndex: Number(focusIdx) });\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <AnnotationShell\r\n        finishedFraction={finishedFraction}\r\n        hideTooltip={hideTooltip}\r\n        queryComponent={\r\n          <>\r\n            <div className={styles.queryText}>{currentJudgementPair.queryText}</div>\r\n            <Menu />\r\n          </>\r\n        }\r\n        documentComponent={\r\n          <div\r\n            key={currentJudgementPair.id}\r\n            className={`${!userSelectionAllowed && styles.noUserSelectionAllowed}`}\r\n            onMouseUp={annotateOnUserSelect}\r\n          >\r\n            {currentJudgementPair.docAnnotationParts.map((annotationPart, partIdx) => {\r\n              // determine if part is in one of the selected ranges\r\n              const correspondingAnnotatedRange = currentJudgementPair.annotatedRanges.find(\r\n                (range) => range.start <= partIdx && range.end >= partIdx,\r\n              );\r\n              const isInAnnotatedRange = !!correspondingAnnotatedRange;\r\n              const isLastInAnnotatedRange =\r\n                !!correspondingAnnotatedRange && partIdx === correspondingAnnotatedRange.end;\r\n\r\n              /*\r\n               * annotation of a part is allowed if\r\n               * - the corresponding judgement mode is set,\r\n               * - it is no whitespace\r\n               * - and the part is not already part of a selected region\r\n               */\r\n              const canAnnotatePart =\r\n                currentJudgementPair.mode === JudgementMode.SCORING_AND_SELECT_SPANS &&\r\n                annotationPart !== ' ' &&\r\n                !isInAnnotatedRange;\r\n\r\n              /*\r\n               * now render two things:\r\n               * - the main annotation part which shows the actual text.\r\n               * - a second annotation part which is only a placeholder. This placeholder will\r\n               *   use the horizontal space remaining in the line of text. Essentially, this\r\n               *   placeholder creates a justified layout for the text (i.e. a \"Blocksatz\" layout,\r\n               *   as it is called in german)\r\n               *\r\n               * Why use a placeholder, instead of just spreading out the parts via the parent container (e.g.,\r\n               * justify-content: space-between)? Well, imagine the user annotated a range containing of multiple words.\r\n               * Then, we want to highlight the entire range, e.g. with a background color.\r\n               * If we would let the parent container take care of spreading out the text parts, there would be empty space\r\n               * in between which is not highlighted like the text. So we need something which we can apply styles onto.\r\n               * The placeholders enable to apply styles on them, e.g. give them the same green background color like the\r\n               * annotated text parts.\r\n               */\r\n              return (\r\n                <React.Fragment key={partIdx}>\r\n                  <AnnotationPart\r\n                    idx={`${partIdx}`}\r\n                    text={annotationPart}\r\n                    isRangeStart={currentJudgementPair.currentAnnotationStart === partIdx}\r\n                    isInSelectedRange={isInAnnotatedRange}\r\n                    showTooltip={tooltipAnnotatePartIndex === partIdx}\r\n                    annotationIsAllowedOnPart={canAnnotatePart}\r\n                    annotationIsAllowedInGeneral={annotationIsAllowedInGeneral}\r\n                    onPartClick={\r\n                      canAnnotatePart\r\n                        ? () => selectRangeStartEnd({ annotationPartIndex: partIdx })\r\n                        : isInAnnotatedRange\r\n                        ? () => setTooltipAnnotatePartIndex(partIdx)\r\n                        : noop\r\n                    }\r\n                    onTooltipClick={() => {\r\n                      deleteRange({ annotationPartIndex: partIdx });\r\n                      hideTooltip();\r\n                    }}\r\n                  />\r\n                  <AnnotationPart\r\n                    idx={`${PLACEHOLDER_PREFIX}${partIdx}`}\r\n                    text=\"\"\r\n                    isInSelectedRange={isInAnnotatedRange && !isLastInAnnotatedRange}\r\n                    annotationIsAllowedInGeneral={annotationIsAllowedInGeneral}\r\n                    isPlaceholder={true}\r\n                    onPartClick={\r\n                      canAnnotatePart\r\n                        ? () => selectRangeStartEnd({ annotationPartIndex: partIdx })\r\n                        : isInAnnotatedRange\r\n                        ? () => setTooltipAnnotatePartIndex(partIdx)\r\n                        : noop\r\n                    }\r\n                    onTooltipClick={() => {\r\n                      deleteRange({ annotationPartIndex: partIdx });\r\n                      hideTooltip();\r\n                    }}\r\n                  />\r\n                </React.Fragment>\r\n              );\r\n            })}\r\n          </div>\r\n        }\r\n        guideComponent={\r\n          ratingRequired ? (\r\n            RateLevels.map((rateLevel) => (\r\n              <RateButton\r\n                key={rateLevel.relevanceLevel}\r\n                rateLevel={rateLevel}\r\n                onClick={createJudgementFn(rateLevel.relevanceLevel)}\r\n              />\r\n            ))\r\n          ) : (\r\n            <>\r\n              <span className={styles.guideText}>\r\n                {currentSelectionNotFinished ? (\r\n                  <>Finish your selection</>\r\n                ) : annotationStatus === 'RELEVANT_REGION_REQUIRED' ? (\r\n                  <>Please select the relevant regions of the document.</>\r\n                ) : annotationStatus === 'MISLEADING_REGION_REQUIRED' ? (\r\n                  <>Please select the misleading regions of the document.</>\r\n                ) : annotationStatus === 'ADDITIONAL_RELEVANT_REGIONS_ALLOWED' ? (\r\n                  <>Feel free to add more relevant regions or go to the next judgement pair.</>\r\n                ) : (\r\n                  <>Feel free to add more misleading regions or go to the next judgement pair.</>\r\n                )}\r\n              </span>\r\n              <Button\r\n                buttonType=\"primary\"\r\n                className={styles.nextButton}\r\n                disabled={currentSelectionNotFinished || annotationIsRequired}\r\n                onClick={() => judgementStories.submitCurrentJudgement()}\r\n              >\r\n                Next\r\n              </Button>\r\n            </>\r\n          )\r\n        }\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Annotation;\r\n","import { useEffect } from 'react';\r\n\r\nexport function useKeyupEvent(keyFunctionMap: { [P: string]: () => void }) {\r\n  useEffect(() => {\r\n    const keyUpHandler = (e: KeyboardEvent) => {\r\n      const key = e.code;\r\n      if (keyFunctionMap.hasOwnProperty(key)) {\r\n        keyFunctionMap[key]();\r\n      }\r\n    };\r\n    document.addEventListener('keyup', keyUpHandler, { passive: true });\r\n    return () => document.removeEventListener('keyup', keyUpHandler);\r\n  });\r\n}\r\n\r\nexport function useOnViewportClick(onViewportClick: () => void) {\r\n  useEffect(() => {\r\n    const viewportClickHandler = () => onViewportClick();\r\n    document.addEventListener('click', viewportClickHandler, { passive: true });\r\n    return () => document.removeEventListener('click', viewportClickHandler);\r\n  });\r\n}\r\n","import { createLogger } from '../logger/logger';\r\nimport { store } from '../store/store';\r\nimport { httpClient } from '../http/http.client';\r\nimport { actions as userActions } from '../store/user/user.slice';\r\nimport { SubmitFeedback } from '../typings/fira-be-typings';\r\n\r\nconst logger = createLogger('annotators.service');\r\n\r\nexport const annotatorStories = {\r\n  acknowledgePage: (page: 'INFO' | 'FINISHED') => {\r\n    logger.info(`executing acknowledgement of page...`, { page });\r\n\r\n    store.dispatch(userActions.acknowledgePage({ page }));\r\n\r\n    logger.info(`acknowledgement of page succeeded!`);\r\n  },\r\n\r\n  submitFeedback: async (feedbackData: SubmitFeedback) => {\r\n    logger.info(`executing submission of feedback...`);\r\n\r\n    await httpClient.submitFeedback(store.getState().user!.accessToken.val, feedbackData);\r\n\r\n    logger.info(`submission of feedback succeeded!`);\r\n  },\r\n};\r\n","import React from 'react';\r\n\r\nimport styles from './AnnotationInfo.module.css';\r\nimport Button from '../../elements/Button';\r\nimport { annotatorStories } from '../../../stories/annotator.stories';\r\nimport { useRouting } from '../AnnotationRouter';\r\n\r\nimport infoPage01 from './info-page-01.png';\r\nimport infoPage02 from './info-page-02.png';\r\n\r\nconst AnnotationInfo: React.FC = () => {\r\n  const annotationRouting = useRouting();\r\n\r\n  const content = [\r\n    {\r\n      type: 'text',\r\n      content: 'Choose a score for the document',\r\n    },\r\n    {\r\n      type: 'image',\r\n      content: infoPage01,\r\n      alt: 'image showing how to choose a score',\r\n    },\r\n    {\r\n      type: 'text',\r\n      content: 'Select regions of the document relevant to the query',\r\n    },\r\n    {\r\n      type: 'image',\r\n      content: infoPage02,\r\n      alt: 'image showing how to select regions of the document',\r\n    },\r\n  ] as const;\r\n\r\n  function onAcknowledge() {\r\n    annotatorStories.acknowledgePage('INFO');\r\n    annotationRouting.routeToAnnotatePage();\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <span className={styles.headline}>Info - How to annotate</span>\r\n      {content.map((entry, idx) =>\r\n        entry.type === 'text' ? (\r\n          <span key={idx}>{entry.content}</span>\r\n        ) : (\r\n          <img key={idx} className={styles.infoImage} src={entry.content} alt={entry.alt} />\r\n        ),\r\n      )}\r\n      <Button onClick={onAcknowledge}>Continue</Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnnotationInfo;\r\n","import React from 'react';\r\n\r\nimport styles from './AnnotationFeedback.module.css';\r\nimport Form from '../../elements/forms/Form';\r\nimport { annotatorStories } from '../../../stories/annotator.stories';\r\nimport { judgementStories } from '../../../stories/judgement.stories';\r\nimport { FeedbackScore } from '../../../typings/enums';\r\nimport { SubmitFeedback } from '../../../typings/fira-be-typings';\r\n\r\nconst FEEDBACK_SCORE_TEXTS = {\r\n  [FeedbackScore.VERY_GOOD]: 'Very good',\r\n  [FeedbackScore.GOOD]: 'Good',\r\n  [FeedbackScore.DECENT]: 'Decent',\r\n  [FeedbackScore.DONT_LIKE_IT]: `Don't like it`,\r\n} as const;\r\n\r\nconst AnnotationFeedback: React.FC = () => {\r\n  async function submitFeedback(feedback: SubmitFeedback) {\r\n    await annotatorStories.submitFeedback(feedback);\r\n    await judgementStories.preloadJudgements();\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <span className={styles.headline}>Feedback</span>\r\n      <div>\r\n        How did you like to work with Fira so far?\r\n        <br />\r\n        We kindly ask you to take a minute to provide some feedback!\r\n      </div>\r\n      <Form\r\n        initialValues={{\r\n          feedbackScore: FeedbackScore.VERY_GOOD,\r\n          feedbackText: '',\r\n        }}\r\n        onSubmit={async (values) => {\r\n          await submitFeedback({ score: values.feedbackScore, text: values.feedbackText });\r\n          // omit setSubmitting here because if submission was successful, it will redirect and thus unmount the component\r\n        }}\r\n        elements={[\r\n          {\r\n            elementType: 'select',\r\n            label: 'Rating',\r\n            childElements: Object.values(FeedbackScore).map((feedbackScore) => (\r\n              <option key={feedbackScore} value={feedbackScore}>\r\n                {FEEDBACK_SCORE_TEXTS[feedbackScore]}\r\n              </option>\r\n            )),\r\n            htmlProps: { name: 'feedbackScore' },\r\n          },\r\n          {\r\n            elementType: 'textarea',\r\n            htmlProps: {\r\n              placeholder: 'Do you want to add something?',\r\n              name: 'feedbackText',\r\n              autoComplete: 'off',\r\n            },\r\n          },\r\n        ]}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnnotationFeedback;\r\n","import React from 'react';\r\n\r\nimport styles from './AnnotationFinished.module.css';\r\nimport { annotatorStories } from '../../../stories/annotator.stories';\r\nimport { useRouting } from '../AnnotationRouter';\r\nimport Button from '../../elements/Button';\r\n\r\nconst PartyPopperEmoji: React.FC = () => (\r\n  <svg width=\"128\" height=\"128\">\r\n    <g>\r\n      <path\r\n        d=\"M72.59,58.36c-0.65,1.18-1.3,2.37-1.92,3.55l-0.52,0.98l-0.05,0.08c1.83,2.43,3.4,5.04,4.64,7.69 c0.18,0.37,0.35,0.75,0.52,1.13c1.77-0.52,3.55-0.81,5.29-0.88c-1.31-3.47-3.33-7.07-6.3-10.71 C73.73,59.57,73.16,58.97,72.59,58.36z\"\r\n        style={{ fill: '#FCC21B' }}\r\n      />\r\n      <path\r\n        d=\"M77.93,85.16c-0.37,0-0.75,0.02-1.13,0.06c-2.07,6.54-8.79,9.4-15.89,8.52 c-11.15-1.37-21.38-9.85-24.81-20.5c-0.7-2.13-0.94-4.25-1.02-6.51c-0.2-5.82,0.92-12.05,6.75-14.46l0.07-0.03 c0.19-0.08,0.38-0.13,0.57-0.19c-0.42-0.63-0.85-1.29-1.26-2.02c-0.58-1.03-0.93-2.12-1.14-3.18c-6.25,2.18-10.06,7.7-12.73,13.78 C24.79,66.45,8.22,111.2,8.22,111.2l-2.22,6c-0.76,2.08-1.94,4.17-1.94,6.44c0,2.65,2.36,4.46,5.02,3.72 c1.78-0.5,3.74-1.42,5.55-2.14c3.83-1.56,10.93-4.63,10.93-4.63l29.68-12.22c0,0,14.31-5.18,20.33-10.85 c2.92-2.75,5.26-6.71,6.29-11.44c-0.21-0.11-0.43-0.23-0.65-0.32C80.21,85.35,79.14,85.16,77.93,85.16z\"\r\n        style={{ fill: '#FCC21B' }}\r\n      />\r\n      <path\r\n        d=\"M55.68,47.54c0.77,1.47,1.62,3.14,1.94,5.21c1.42,0.6,2.78,1.32,4.07,2.17 c0.45-1.44,0.92-2.86,1.41-4.31c-0.21-0.13-0.42-0.28-0.63-0.4c-2.11-1.2-4.48-2.22-6.95-2.98C55.58,47.34,55.63,47.43,55.68,47.54 z\"\r\n        style={{ fill: '#FCC21B' }}\r\n      />\r\n      <path\r\n        d=\"M111.93,31.98c-0.16,1-0.12,2.42,0.04,3.4c0.17,1.1,0.42,2.27,0.82,3.31 c0.57,1.46,1.27,0.95,2.7,0.75c0.99-0.13,1.91-0.06,2.89-0.26c1.03-0.21,2.05-0.48,3.08-0.68c2.42-0.46,3.63-1,3.12-3.55 c-0.37-1.84-0.98-3.67-1.46-5.49c-0.44-0.39-1.29-0.17-1.81-0.05c-0.92,0.21-1.83,0.26-2.75,0.42c-1.66,0.27-3.4,0.47-5.03,0.86 C112.7,30.87,112.06,31.12,111.93,31.98z\"\r\n        style={{ fill: '#D7598B' }}\r\n      />\r\n      <path\r\n        d=\"M98.87,62c0.38,0.87,1.31,0.65,2.22,0.85c2.02,0.46,4.07,0.41,6.14,0.41c0.77,0,2.72,0.29,3.27-0.4 c0.44-0.56,0.06-1.67,0-2.32c-0.08-0.85-0.16-1.69-0.24-2.54c-0.04-0.4,0.03-3.02-0.31-3.24c-0.58-0.39-1.68-0.2-2.34-0.19 c-1.21,0.04-2.4,0.19-3.63,0.19c-1.59,0-3.31,0.02-4.85,0.4c-0.54,1.43-0.39,2.92-0.39,4.49C98.74,60.38,98.58,61.32,98.87,62z\"\r\n        style={{ fill: '#40C0E7' }}\r\n      />\r\n      <path\r\n        d=\"M91.92,105.19c-0.83-1.23-1.24-2.88-3.09-2.7c-1.74,0.17-3.28,1.55-4.81,2.3 c-0.99,0.48-1.71,1.34-1.91,2.42c-0.23,1.23,0.28,2.21,0.87,3.26c0.44,0.79,0.73,1.7,1.08,2.53c0.36,0.86,0.91,1.63,1.28,2.48 c0.25,0.6,0.17,0.55,0.72,0.76c0.28,0.1,0.74,0.18,1.04,0.19c1.75,0.05,3.65-1.72,4.92-2.76c1.02-0.82,3.06-1.34,2.85-2.89 c-0.15-1.15-0.95-2.26-1.5-3.25C92.91,106.72,92.42,105.94,91.92,105.19z\"\r\n        style={{ fill: '#D7598B' }}\r\n      />\r\n      <path\r\n        d=\"M111.46,113.59c-0.23-0.15-0.45-0.24-0.65-0.27c-1.06-0.19-1.76,1.09-2.6,1.92 c-1.01,0.97-2.21,1.74-3.13,2.8c-0.99,1.16-0.22,2.2,0.8,2.82c1.11,0.67,2.1,1.51,3.2,2.21c0.98,0.63,1.77,1.19,2.86,0.51 c0.99-0.62,1.54-1.71,2.22-2.62c1.26-1.7,3.41-3.07,1.3-4.94C114.28,114.97,112.76,114.45,111.46,113.59z\"\r\n        style={{ fill: '#40C0E7' }}\r\n      />\r\n      <path\r\n        d=\"M9,55.06c0.05-0.46,1.35-4.14,0.96-4.25c-0.89-0.22-1.73-0.64-2.63-0.88 c-1.04-0.27-2.11-0.48-3.08-0.96c-1.17-0.58-1.89-0.29-2.38,0.36c-0.69,0.92-0.91,2.57-1.24,3.58c-0.26,0.79-0.42,1.69,0.14,2.25 c0.64,0.63,1.7,0.99,2.53,1.26c1.04,0.34,2.2,0.94,3.27,1.04C8.03,57.62,8.85,56.3,9,55.06z\"\r\n        style={{ fill: '#40C0E7' }}\r\n      />\r\n      <path\r\n        d=\"M68.63,19.54c1.3,0.58,2.56,0.91,3.89,1.29c0.47,0.14,0.77,0.37,1.26,0.11 c0.63-0.32,1.33-1.43,1.68-2.04c0.83-1.51,1.44-3,2.01-4.59c0.31-0.85,1.23-2.23,1-3.13c-0.2-0.76-1.3-1.23-1.92-1.56 c-0.83-0.43-1.62-1.01-2.46-1.38c-1.08-0.47-2.56-0.98-3.72-1.15c-0.64-0.1-1.09,0.16-1.44,0.57c-0.32,0.37-0.56,0.86-0.8,1.31 c-1.21,2.32-2.7,5.81-2.65,8.49C65.5,18.73,67.67,19.11,68.63,19.54z\"\r\n        style={{ fill: '#40C0E7' }}\r\n      />\r\n      <path\r\n        d=\"M16.65,33.3c0.73,1.12,1.38,2.14,2.24,3.2c0.84,1.02,1.44,1.22,2.47,0.37 c0.65-0.52,1.39-0.93,2.01-1.49c0.59-0.52,1.08-1.18,1.67-1.72c0.42-0.39,1.25-0.78,1.49-1.32c0.33-0.76-0.36-1.42-0.78-1.98 c-0.52-0.7-0.92-1.46-1.49-2.16c-0.73-0.88-1.52-1.71-2.34-2.53c-0.67-0.67-1.48-1.7-2.24-2.22c-0.2-0.13-0.43-0.22-0.67-0.25 c-0.91-0.13-1.99,0.39-2.7,0.81c-0.97,0.57-1.91,1.42-2.76,2.17c-1.33,1.18-0.04,2.73,0.74,3.85 C15.07,31.11,15.91,32.16,16.65,33.3z\"\r\n        style={{ fill: '#D7598B' }}\r\n      />\r\n      <path\r\n        d=\"M16.73,9.97c0.67,0.72,1.5,1.59,2.44,2c0.83,0.37,1.68-0.37,2.35-0.78c0.75-0.46,1.36-1.13,1.92-1.8 c0.51-0.62,1.2-1.29,1.58-2.01c0.44-0.82-0.16-1.13-0.77-1.62c-0.73-0.6-1.47-1.22-2.09-1.94c-0.84-0.98-1.68-2.08-2.57-2.98 c-0.3-0.31-0.66-0.39-1.04-0.32c-1.19,0.2-2.6,1.87-3.3,2.42c-0.56,0.43-1.54,1.19-1.71,1.9c-0.21,0.8,0.26,1.57,0.66,2.24 C14.85,8.16,15.85,9.03,16.73,9.97z\"\r\n        style={{ fill: '#40C0E7' }}\r\n      />\r\n      <path\r\n        d=\"M45.86,29.19c1.38,4.78-2.3,8.47-2.7,13c-0.12,1.31-0.12,2.62,0.1,3.88 c0.14,0.82,0.37,1.62,0.78,2.35c0.54,0.96,1.16,1.83,1.73,2.73c0.56,0.87,1.06,1.75,1.4,2.76c0.75,2.24,0.23,4.26-0.09,6.48 c-0.26,1.77-1.16,3.44-2.24,4.84c-0.33,0.43-1.24,0.98-1.02,1.61c0.03,0.11,0.23,0.15,0.52,0.15c1.2,0,4.03-0.73,4.44-0.92 c1.8-0.87,2.85-2.63,3.78-4.33c1.38-2.52,2.27-5.46,1.88-8.35c-0.08-0.66-0.26-1.28-0.48-1.88c-0.67-1.79-1.78-3.39-2.41-5.22 c-0.08-0.22-0.16-0.44-0.22-0.67c-0.92-3.58,1.29-7.09,3.15-9.94c1.83-2.79,2.52-6.89,1.22-10.09c-0.66-1.62-1.72-3.24-3.01-4.43 c-1.53-1.42-3.86-2.71-3.6-5.16c0.22-2.13,1.66-4.37,2.75-6.13c0.54-0.89,2.24-2.71,2.18-3.73c-0.05-1.04-1.5-1.56-2.19-2.17 c-1.56-1.38-2.8-2.44-4.8-3.07c-0.36-0.12-0.66-0.17-0.94-0.17c-1.29,0-1.74,1.17-2.46,2.43c-1.32,2.33-2.62,4.79-3.5,7.31 c-1.66,4.68-1.91,9.51,1.68,13.89C43.05,25.89,45.34,27.39,45.86,29.19z\"\r\n        style={{ fill: '#ED6C30' }}\r\n      />\r\n      <path\r\n        d=\"M62.08,69.54c0.25,0.26,0.48,0.37,0.69,0.37c0.39,0,0.7-0.4,0.95-0.87 c0.19-0.36,0.34-0.73,0.46-1.12c0.67-2.25,2-4.48,3.1-6.56c0.2-0.37,0.4-0.73,0.59-1.09c0.76-1.43,1.54-2.86,2.35-4.28 c0.63-1.12,1.26-2.25,1.94-3.33c1.78-2.85,4.18-5.89,7.2-7.48c1.9-1.02,4.04-1.49,5.95-2.5c2.17-1.13,3.44-2.84,4.85-4.79 c1.4-1.93,2.13-4.31,3.41-6.34c0.54-0.86,0.46-1.62,1.41-2.22c2.11-1.32,4.64-0.87,6.98-1.32c5.53-1.06,6.02-8.35,10.54-10.98 c0.95-0.55,1.92-1.06,2.88-1.57c0.56-0.3,1.64-0.67,2.03-1.22c0.67-0.94-0.6-2.17-0.98-3.03c-0.66-1.48-1.65-2.97-2.5-4.35 c-0.72-1.16-1.36-2.21-2.64-2.21l-0.25,0.02c-2.89,0.28-5.47,1.55-7.32,3.76c-2.25,2.7-2.55,6.87-6.09,8.35 c-2.3,0.96-5.01,0.58-7.19,1.91c-2.58,1.58-3.41,4.7-4.13,7.44c-0.54,2-0.57,4.41-2.09,5.98c-2.06,2.11-5.19,2.37-7.83,3.5 c-0.71,0.31-1.39,0.68-2,1.16c-3.35,2.64-5.25,6.97-6.75,10.85c-0.61,1.59-1.16,3.21-1.7,4.83c-0.5,1.51-0.99,3.02-1.46,4.54 c-0.24,0.78-0.5,1.56-0.74,2.35c-0.61,1.98-1.17,4.01-1.89,5.96C61.35,66.55,61.04,68.46,62.08,69.54z\"\r\n        style={{ fill: '#ED6C30' }}\r\n      />\r\n      <path\r\n        d=\"M127.44,86.8c-0.19-0.2-0.46-0.22-0.73-0.22l-0.31,0.01l-0.17-0.01c-0.6-0.04-1.1-0.3-1.68-0.5 c-2.67-0.93-4.4-1.7-6.76-3.29c-2.66-1.79-5.71-3.46-8.99-3.61l-0.38-0.01c-3.24,0-6.23,1.71-9.48,1.71h-0.02 c-3.6-0.02-6.71-2.58-9.55-4.47c-0.24-0.16-0.48-0.31-0.74-0.45c-2.23-1.26-4.63-1.81-7.05-1.84c-0.06,0-0.13-0.02-0.19-0.02 c-1.67,0-3.35,0.26-4.99,0.72c-1.6,0.44-3.15,1.08-4.63,1.87c-2.11,1.12-4.14,2.47-5.99,3.97c-1.03,0.83-2.16,1.78-2.86,2.93 c-0.38,0.61-0.9,2.93,0.07,3.31l0.13,0.03c0.38,0,1-0.4,1.27-0.57c2.16-1.33,4.44-2.49,6.87-3.25c1.99-0.63,4.08-1.09,6.15-1.17 c0.17-0.01,0.35-0.02,0.52-0.02c1.49,0,2.97,0.23,4.41,0.79c0.02,0.01,0.04,0.02,0.06,0.03c2.01,0.8,3.69,2.18,5.35,3.53 c2.44,1.98,5.15,2.42,7.91,2.42c2.15,0,4.33-0.26,6.46-0.26c2.23,0,4.39,0.29,6.38,1.46c1.62,0.97,3.08,2.24,4.33,3.59 c1.38,1.47,3.14,2.7,5.21,3.02c0.88,0.14,1.68,0.21,2.57,0.22h0.02c1.5,0,2.07-1.73,2.83-2.72c1.04-1.34,1.76-2.88,2.71-4.29 C126.57,89.09,128.12,87.48,127.44,86.8z\"\r\n        style={{ fill: '#ED6C30' }}\r\n      />\r\n    </g>\r\n  </svg>\r\n);\r\n\r\nconst AnnotationFinished: React.FC = () => {\r\n  const annotationRouting = useRouting();\r\n\r\n  function onAcknowledge() {\r\n    annotatorStories.acknowledgePage('FINISHED');\r\n    annotationRouting.routeToAnnotatePage();\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <span className={styles.headline}>Congratulations!</span>\r\n      <div className={styles.finishedLogo}>\r\n        <PartyPopperEmoji />\r\n      </div>\r\n      <div>\r\n        <div>You finished your annotation target!</div>\r\n        <div>Feel free to continue annotating!</div>\r\n      </div>\r\n      <Button className={styles.button} buttonType=\"primary\" onClick={onAcknowledge}>\r\n        Continue\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AnnotationFinished;\r\n","import React from 'react';\r\nimport { Switch, Route, Redirect, useRouteMatch, useHistory } from 'react-router-dom';\r\n\r\nimport Annotation from './annotate-page/Annotation';\r\nimport AnnotationInfo from './info-page/AnnotationInfo';\r\nimport AnnotationFeedback from './feedback-page/AnnotationFeedback';\r\nimport AnnotationFinished from './finished-page/AnnotationFinished';\r\nimport { useUserState } from '../../store/user/user.hooks';\r\nimport { useAnnotationState } from '../../store/annotation/annotation.hooks';\r\nimport { assertUnreachable } from '../../util/types.util';\r\n\r\nconst ANNOTATE_RELATIVE_URL = 'annotate';\r\nconst INFO_RELATIVE_URL = 'info';\r\nconst FINISHED_RELATIVE_URL = 'finished';\r\nconst FEEDBACK_RELATIVE_URL = 'feedback';\r\n\r\nexport function useRouting() {\r\n  const history = useHistory();\r\n\r\n  return {\r\n    routeToAnnotatePage: () => {\r\n      history.push(ANNOTATE_RELATIVE_URL);\r\n    },\r\n    routeToInfoPage: () => {\r\n      history.push(INFO_RELATIVE_URL);\r\n    },\r\n  };\r\n}\r\n\r\nconst AnnotationRouter: React.FC = () => {\r\n  const match = useRouteMatch();\r\n  const { userAcknowledgedInfoPage, userAcknowledgedFinishedPage } = useUserState();\r\n  const {\r\n    remainingToFinish,\r\n    remainingUntilFirstFeedbackRequired,\r\n    countOfFeedbacks,\r\n    annotationDataReceivedFromServer,\r\n  } = useAnnotationState();\r\n\r\n  const redirectToDefault = <Redirect to={`${match.path}/${ANNOTATE_RELATIVE_URL}`} />;\r\n\r\n  const pageToShow = !annotationDataReceivedFromServer\r\n    ? 'ANNOTATION_PAGE'\r\n    : remainingToFinish! > 0 && !userAcknowledgedInfoPage\r\n    ? 'INFO_PAGE'\r\n    : (remainingUntilFirstFeedbackRequired! <= 0 && countOfFeedbacks! < 1) ||\r\n      (remainingToFinish! <= 0 && countOfFeedbacks! < 2)\r\n    ? 'FEEDBACK_PAGE'\r\n    : remainingToFinish! <= 0 && !userAcknowledgedFinishedPage\r\n    ? 'FINISHED_PAGE'\r\n    : 'ANNOTATION_PAGE';\r\n\r\n  return (\r\n    <Switch>\r\n      <Route path={`${match.path}/${ANNOTATE_RELATIVE_URL}`}>\r\n        {pageToShow === 'INFO_PAGE' ? (\r\n          // on this device, the info page was never shown and\r\n          // acknowledged by the user --> show page\r\n          <Redirect to={`${match.path}/${INFO_RELATIVE_URL}`} />\r\n        ) : pageToShow === 'FEEDBACK_PAGE' ? (\r\n          // user must submit a feedback\r\n          <Redirect to={`${match.path}/${FEEDBACK_RELATIVE_URL}`} />\r\n        ) : pageToShow === 'FINISHED_PAGE' ? (\r\n          // user finished annotation target and the finished page was never shown and\r\n          // acknowledged by the user --> show page\r\n          <Redirect to={`${match.path}/${FINISHED_RELATIVE_URL}`} />\r\n        ) : pageToShow === 'ANNOTATION_PAGE' ? (\r\n          <Annotation />\r\n        ) : (\r\n          assertUnreachable(pageToShow)\r\n        )}\r\n      </Route>\r\n      <Route path={`${match.path}/${INFO_RELATIVE_URL}`}>\r\n        <AnnotationInfo />\r\n      </Route>\r\n      <Route path={`${match.path}/${FINISHED_RELATIVE_URL}`}>\r\n        {pageToShow !== 'FINISHED_PAGE' ? redirectToDefault : <AnnotationFinished />}\r\n      </Route>\r\n      <Route path={`${match.path}/${FEEDBACK_RELATIVE_URL}`}>\r\n        {pageToShow !== 'FEEDBACK_PAGE' ? redirectToDefault : <AnnotationFeedback />}\r\n      </Route>\r\n      {redirectToDefault}\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default AnnotationRouter;\r\n","import React, { useState } from 'react';\r\nimport { Manager, Reference, Popper } from 'react-popper';\r\n\r\nimport styles from './Menu.module.css';\r\nimport Button from './Button';\r\nimport { useOnViewportClick } from '../util/events.hooks';\r\nimport { useUserActions } from '../../store/user/user.hooks';\r\nimport { useRouting } from '../annotation-route/AnnotationRouter';\r\n\r\nconst MenuButton = React.forwardRef<HTMLButtonElement, { onClick: () => void }>(\r\n  ({ onClick }, ref) => (\r\n    <Button ref={ref} buttonType=\"tertiary\" className={styles.menuButton} onClick={onClick}>\r\n      {/* https://material.io/resources/icons/?icon=more_vert&style=baseline */}\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\">\r\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n        <path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" />\r\n      </svg>\r\n    </Button>\r\n  ),\r\n);\r\n\r\nconst Menu: React.FC = () => {\r\n  const [showMenu, setShowMenu] = useState(false);\r\n  useOnViewportClick(() => setShowMenu(false));\r\n  const userActions = useUserActions();\r\n  const annotationRouting = useRouting();\r\n\r\n  function onLogout() {\r\n    userActions.logout();\r\n  }\r\n\r\n  function onShowInfoPage() {\r\n    annotationRouting.routeToInfoPage();\r\n  }\r\n\r\n  function toggleShowMenu() {\r\n    setShowMenu((oldVal) => !oldVal);\r\n  }\r\n\r\n  function createMenuButton(ref?: React.Ref<HTMLButtonElement>) {\r\n    return <MenuButton onClick={toggleShowMenu} ref={ref} />;\r\n  }\r\n\r\n  return !showMenu ? (\r\n    createMenuButton()\r\n  ) : (\r\n    <Manager>\r\n      <Reference>{({ ref }) => createMenuButton(ref)}</Reference>\r\n      <Popper placement=\"bottom-end\">\r\n        {({ ref, style, placement }) => (\r\n          <div ref={ref} style={style} data-placement={placement}>\r\n            <Button onClick={onShowInfoPage}>Go to Info Page</Button>\r\n            <Button onClick={onLogout}>Logout</Button>\r\n          </div>\r\n        )}\r\n      </Popper>\r\n    </Manager>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Formik, Form, Field } from 'formik';\r\n\r\nimport styles from './Admin.module.css';\r\nimport { Statistic } from '../../typings/fira-be-typings';\r\nimport { JudgementMode } from '../../typings/enums';\r\nimport { adminStories } from '../../stories/admin.stories';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../../store/store';\r\nimport Button from '../elements/Button';\r\nimport Menu from '../elements/Menu';\r\nimport Line from '../elements/Line';\r\n\r\nconst Admin: React.FC = () => {\r\n  const [statistics, updateStatistics] = useState<Statistic[] | undefined>(undefined);\r\n\r\n  // TODO improve: if the application starts, and a user is logged in but the access token is expired,\r\n  // user.subscriptions.ts will asynchronously refresh the token. But the effect fires immediately,\r\n  // so the fetch of statistics fails. That's why we add the user as a dependency for the effect.\r\n  // it would be better if the application waits for the successful refresh and only runs the effect afterwards.\r\n  const user = useSelector((state: RootState) => state.user);\r\n  useEffect(() => {\r\n    async function fetchStatisticsAndUpdate() {\r\n      updateStatistics((await adminStories.getStatistics()).statistics);\r\n    }\r\n\r\n    fetchStatisticsAndUpdate();\r\n  }, [user]);\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.adminArea}>\r\n        <div className={styles.actionBar}>\r\n          <div className={styles.actionButtons}>\r\n            <Button className={styles.button} onClick={adminStories.exportJudgements}>\r\n              <span>Export Judgements</span>\r\n            </Button>\r\n            <Button className={styles.button} onClick={adminStories.exportFeedback}>\r\n              <span>Export Feedback</span>\r\n            </Button>\r\n          </div>\r\n          <Menu />\r\n        </div>\r\n        <Line orientation=\"horizontal\" />\r\n        <Formik\r\n          initialValues={{\r\n            judgementMode: JudgementMode.SCORING_AND_SELECT_SPANS,\r\n            rotateDocumentText: 'true',\r\n          }}\r\n          onSubmit={async (values, { setSubmitting }) => {\r\n            try {\r\n              await adminStories.updateConfig({\r\n                ...values,\r\n                rotateDocumentText: values.rotateDocumentText === 'true',\r\n              });\r\n              setSubmitting(true);\r\n            } catch (e) {\r\n              setSubmitting(false);\r\n            }\r\n          }}\r\n        >\r\n          {({ isSubmitting }) => (\r\n            <Form className={styles.actionBar}>\r\n              <div className={styles.options}>\r\n                <div>\r\n                  <label htmlFor=\"judgementMode\">Judgement Mode:</label>\r\n                  <Field name=\"judgementMode\" as=\"select\">\r\n                    {Object.values(JudgementMode).map((judgementMode) => (\r\n                      <option key={judgementMode} value={judgementMode}>\r\n                        {judgementMode}\r\n                      </option>\r\n                    ))}\r\n                  </Field>\r\n                </div>\r\n                <div>\r\n                  <label htmlFor=\"rotateDocumentText\">Rotate Document Text:</label>\r\n                  <Field name=\"rotateDocumentText\" as=\"select\">\r\n                    <option value=\"true\">true</option>\r\n                    <option value=\"false\">false</option>\r\n                  </Field>\r\n                </div>\r\n              </div>\r\n              <Button\r\n                className={styles.button}\r\n                type=\"submit\"\r\n                disabled={isSubmitting}\r\n                isLoading={isSubmitting}\r\n              >\r\n                Update Config\r\n              </Button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n        <Line orientation=\"horizontal\" />\r\n        <div className={styles.statisticsContainer}>\r\n          {statistics &&\r\n            statistics.map((statistic) => (\r\n              <div key={statistic.id} className={styles.statistic}>\r\n                <div className={styles.statisticValue}>{statistic.value}</div>\r\n                <div className={styles.statisticLabel}>{statistic.label}</div>\r\n              </div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Admin;\r\n","import React from 'react';\r\nimport { RouteProps, Route, Redirect } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport { RootState } from '../store/store';\r\nimport { UserRole } from '../typings/enums';\r\n\r\ntype PrivateRouteProps = RouteProps & {\r\n  requiredRole: UserRole;\r\n};\r\n\r\nconst RoleRoute: React.FC<PrivateRouteProps> = ({ requiredRole, ...rest }) => {\r\n  const user = useSelector((state: RootState) => state.user);\r\n\r\n  if (!!user && user?.role === requiredRole) {\r\n    return <Route {...rest} />;\r\n  } else {\r\n    return <Redirect to=\"/\" />;\r\n  }\r\n};\r\n\r\nexport default RoleRoute;\r\n","import React from 'react';\r\nimport { BrowserRouter, Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport Login from './login-page/Login';\r\nimport Admin from './admin-page/Admin';\r\nimport AnnotationRouter from './annotation-route/AnnotationRouter';\r\nimport RoleRoute from './RoleRoute';\r\nimport { useUserState } from '../store/user/user.hooks';\r\nimport { UserRole } from '../typings/enums';\r\nimport { assertUnreachable } from '../util/types.util';\r\n\r\nconst RedirectDependingOnUserRole: React.FC = () => {\r\n  const { userRole } = useUserState();\r\n\r\n  if (!userRole) {\r\n    return <Redirect to=\"/login\" />;\r\n  } else if (userRole === UserRole.ADMIN) {\r\n    return <Redirect to=\"/admin\" />;\r\n  } else if (userRole === UserRole.ANNOTATOR) {\r\n    return <Redirect to=\"/annotator\" />;\r\n  } else {\r\n    assertUnreachable(userRole);\r\n  }\r\n};\r\n\r\nconst MainRouter: React.FC = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route exact path=\"/\">\r\n          <RedirectDependingOnUserRole />\r\n        </Route>\r\n        <Route path=\"/login\">\r\n          <Login />\r\n        </Route>\r\n        <RoleRoute path=\"/admin\" requiredRole={UserRole.ADMIN}>\r\n          <Admin />\r\n        </RoleRoute>\r\n        <RoleRoute path=\"/annotator\" requiredRole={UserRole.ANNOTATOR}>\r\n          <AnnotationRouter />\r\n        </RoleRoute>\r\n        <Redirect to=\"/\" />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default MainRouter;\r\n","import React from 'react';\r\n\r\nimport styles from './App.module.css';\r\nimport MainRouter from './ui/MainRouter';\r\n\r\nconst App: React.FC = () => {\r\n  return (\r\n    <div className={styles.app}>\r\n      <MainRouter />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA',\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.',\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { browserStorage } from '../browser-storage/browser-storage';\r\nimport { store } from '../store/store';\r\nimport { actions as userActions } from '../store/user/user.slice';\r\nimport { createLogger } from '../logger/logger';\r\n\r\nconst logger = createLogger('load-stored-user');\r\n\r\nexport function loadStoredUser() {\r\n  logger.info('load user from browser storage');\r\n  const storedUser = browserStorage.getUser();\r\n\r\n  if (storedUser) {\r\n    logger.info('stored user found. dispatching authenticate and acknowledge info page...', {\r\n      storedUser,\r\n    });\r\n    store.dispatch(userActions.authenticate(storedUser));\r\n    if (storedUser.acknowledgedInfoPage) {\r\n      store.dispatch(userActions.acknowledgePage({ page: 'INFO' }));\r\n    }\r\n  } else {\r\n    logger.info('no stored user found');\r\n  }\r\n}\r\n","import { loadStoredUser } from './load-stored-user';\r\nimport { createLogger } from '../logger/logger';\r\n\r\nconst bootScripts = [loadStoredUser];\r\n\r\nconst logger = createLogger('boot');\r\n\r\nexport const executeBootScripts = () => {\r\n  logger.info('executing boot scripts...');\r\n\r\n  bootScripts.forEach((bootScript) => bootScript());\r\n};\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport { store } from './store/store';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport { executeBootScripts } from './boot/boot';\r\n\r\nexecuteBootScripts();\r\n\r\nconst renderApp = () =>\r\n  ReactDOM.render(\r\n    <React.StrictMode>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root'),\r\n  );\r\n\r\nif (process.env.NODE_ENV !== 'production' && (module as any).hot) {\r\n  (module as any).hot.accept('./App', renderApp);\r\n}\r\n\r\nrenderApp();\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RateButton_container__3gt5W\",\"notRelevant\":\"RateButton_notRelevant__3wpKi\",\"misleadingAnswer\":\"RateButton_misleadingAnswer__27_t0\",\"topicRelevantDoesNotAnswer\":\"RateButton_topicRelevantDoesNotAnswer__13C4J\",\"goodAnswer\":\"RateButton_goodAnswer__2g9Bs\",\"perfectAnswer\":\"RateButton_perfectAnswer__1XzD9\",\"button\":\"RateButton_button__376Af\",\"hotkey\":\"RateButton_hotkey__ze67j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"annotatePart\":\"AnnotationPart_annotatePart__3YsjT\",\"rangeStart\":\"AnnotationPart_rangeStart__1czle\",\"isInRange\":\"AnnotationPart_isInRange__hFdLD\",\"annotationAllowedOnPart\":\"AnnotationPart_annotationAllowedOnPart__Be0XQ\",\"annotationAllowedInGeneral\":\"AnnotationPart_annotationAllowedInGeneral__33pWq\",\"annotatePartTooltipButton\":\"AnnotationPart_annotatePartTooltipButton__1qKz-\",\"placeholder\":\"AnnotationPart_placeholder__1diiq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"Form_form__1uDGN\",\"inputContainer\":\"Form_inputContainer__1oHRC\",\"inputDivider\":\"Form_inputDivider__36Zo9\",\"errorList\":\"Form_errorList__1LRve\",\"button\":\"Form_button__3zRcn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__aUVEj\",\"typePrimary\":\"Button_typePrimary__3vapG\",\"typeSecondary\":\"Button_typeSecondary__21OUE\",\"typeTertiary\":\"Button_typeTertiary__lB476\",\"animate\":\"Button_animate__P4pSL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Login_container__1qZ_N\",\"inputArea\":\"Login_inputArea__3gas0\",\"headline\":\"Login_headline__1PqMZ\",\"inputHeadline\":\"Login_inputHeadline__2vy_z\",\"inputContainer\":\"Login_inputContainer__3Jpw4\",\"inputDivider\":\"Login_inputDivider__a50Ku\",\"errorList\":\"Login_errorList__2PJJj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AnnotationFinished_container__1YX9s\",\"headline\":\"AnnotationFinished_headline__10bUM\",\"button\":\"AnnotationFinished_button__yBGUR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ldsEllipsis\":\"LoadingIndicator_ldsEllipsis__1NuRE\",\"typePrimary\":\"LoadingIndicator_typePrimary__GpZdE\",\"typeSecondary\":\"LoadingIndicator_typeSecondary__2jfcd\",\"lds-ellipsis1\":\"LoadingIndicator_lds-ellipsis1__3Vee3\",\"lds-ellipsis2\":\"LoadingIndicator_lds-ellipsis2__1xuwq\",\"lds-ellipsis3\":\"LoadingIndicator_lds-ellipsis3__14o4E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"AnnotationInfo_container__36eTi\",\"headline\":\"AnnotationInfo_headline__2sc42\",\"infoImage\":\"AnnotationInfo_infoImage__3Iuqq\"};"],"sourceRoot":""}